"use strict";function getSelect2Header(){var t=$("body").data().selectAjaxHeader,e=window.getSelect2HeaderFunction,i={};return t&&e&&$.isFunction(e)?(i[t]=e(),i):{}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}$.fn.bhojpurSliderAfterShow=$.fn.bhojpurSliderAfterShow||{},window.BHOJPUR={$formLoading:'<div id="bhojpur-submit-loading" class="clearfix"><div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active"></div></div>'},String.prototype.escapeSymbol=function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return this.replace(/[&<>"']/g,function(t){return e[t]||t})},window.Mustache&&(window.Mustache.tags=["[[","]]"]),$(document).ajaxComplete(function(t,e,i){"POST"!=i.type&&"PUT"!=i.type||$.fn.bhojpurSlideoutBeforeHide&&($.fn.bhojpurSlideoutBeforeHide=null,window.onbeforeunload=null)}),$.fn.select2.ajaxCommonOptions=function(t){var i=t.remoteDataPrimaryKey;return{dataType:"json",headers:getSelect2Header(t),cache:!0,delay:250,data:function(t){return{keyword:t.term,page:t.page,per_page:20}},processResults:function(t,e){e.page=e.page||1;e=$.map(t,function(t){return t.id=t[i]||t.primaryKey||t.Id||t.ID,t});return{results:e,pagination:{more:20<=e.length}}}}},$.fn.select2.ajaxFormatResult=function(t,e,i){var n,o="";return t.loading?t.text:(console.log("select2.ajaxFormatResult: Data"),console.log(t),console.log("select2.ajaxFormatResult: has remote image"),console.log(i),i?(i=t.text||t.Name||t.Title||t.Code||t[Object.keys(t)[0]],o=(n=t.Image)?'<div class="select2-results__option-withimage"><img src="'+n+'"><span>'+i+"</span></div>":'<div class="select2-results__option-withimage">'+i+"</span></div>",$(o)):(o=0<e.length?window.Mustache.render(e.html().replace(/{{(.*?)}}/g,"[[$1]]"),t):t.text||t.Name||t.Title||t.Code||t[Object.keys(t)[0]],/<(.*)(\/>|<\/.+>)/.test(o)?$(o):o))},$(function(){function r(t,e){var i,n,o=e||new FormData;for(n in t)t.hasOwn(n)&&t[n]&&(i=n),t[n]instanceof Date?o.append(i,t[n].toISOString()):"object"!==_typeof(t[n])||t[n]instanceof File?o.append(i,t[n]):r(t[n],o);return o}function t(){var t=$(".bhojpur-linkify-object"),e=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w-]{11})(?=[^\w-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi;t.length&&t.each(function(){var t=$(this).data("video-link");t.match(e)&&$(this).html('<iframe width="100%" height="100%" src="//www.youtube.com/embed/'.concat(t.replace(e,"$1"),'" frameborder="0" allowfullscreen></iframe>'))})}var s=window._,o=window.BHOJPUR,a=window.BHOJPUR_Translations,e='<div id="dialog" style="display: none;">\n                    <div class="mdl-dialog-bg"></div>\n                    <div class="mdl-dialog">\n                        <div class="mdl-dialog__content">\n                          <p><i class="material-icons">warning</i></p>\n                          <p class="mdl-dialog__message dialog-message">\n                          </p>\n                        </div>\n                        <div class="mdl-dialog__actions">\n                          <button type="button" class="mdl-button mdl-button--raised mdl-button--colored dialog-ok dialog-button" data-type="confirm">\n                            '.concat(a.okButton,'\n                          </button>\n                          <button type="button" class="mdl-button dialog-cancel dialog-button" data-type="">\n                            ').concat(a.cancelButton,"\n                          </button>\n                        </div>\n                      </div>\n                  </div>"),l=$(e).appendTo("body");$(document).on("keyup.bhojpur.confirm",function(t){l.is(":visible")&&(27===t.which&&setTimeout(function(){l.hide(),o.bhojpurConfirmCallback=void 0},100),13===t.which&&setTimeout(function(){$('.dialog-button[data-type="confirm"]').click()},100))}).on("click.bhojpur.confirm",".dialog-button",function(){var t=$(this).data("type"),e=o.bhojpurConfirmCallback;return $.isFunction(e)&&e(t),l.hide(),o.bhojpurConfirmCallback=void 0,!1}),o.bhojpurConfirm=function(t,e){var i=l.find(".dialog-ok"),n=l.find(".dialog-cancel");return s.isString(t)?(l.find(".dialog-message").text(t),i.text(a.okButton),n.text(a.cancelButton)):s.isObject(t)&&(t.confirmOk&&t.confirmCancel?(i.text(t.confirmOk),n.text(t.confirmCancel)):(i.text(a.okButton),n.text(a.cancelButton)),t.icon&&l.find("i.material-icons").addClass(t.icon).html(t.icon),l.find(".dialog-message").text(t.confirm)),l.show(),o.bhojpurConfirmCallback=e,!1},o.bhojpurAjaxHandleFile=function(t,i,n,e){var o=new XMLHttpRequest;o.responseType="arraybuffer",o.open("POST",t,!0),o.onload=function(){var t,e;200===this.status?(t=new Blob([this.response],{type:i}),t=window.URL.createObjectURL(t),e=document.createElement("a"),document.body.appendChild(e),e.href=t,e.download=n||"download-"+$.now(),e.click()):window.alert(a.serverError)},s.isObject(e)&&("[object FormData]"!=Object.prototype.toString.call(e)&&(e=r(e)),o.send(e))};($.fn.bhojpurSliderAfterShow.converVideoLinks=t)(),o.handleAjaxError=function(t){var e=$("body"),i=t.responseJSON,n=t.responseText,o=$('<ul class="bhojpur-alert bhojpur-error" data-dismissible="true"><button type="button" class="mdl-button mdl-button--icon" data-dismiss="alert">\n                              <i class="material-icons">close</i>\n                          </button></ul>');if(e.find(".bhojpur-alert").remove(),422===t.status)if(i){var r=i.errors,s="";if($.isArray(r))for(var a=0;a<r.length;a++)s+='<li>\n                                            <i class="material-icons">error</i>\n                                            <span>'.concat(r[a],"</span>\n                                        </li>");else s='<li>\n                                <i class="material-icons">error</i>\n                                <span>'.concat(r,"</span>\n                            </li>");o.append(s)}else o=$(n).find(".bhojpur-error");else o.append('<li>\n                              <i class="material-icons">error</i>\n                              <span>'.concat(t.statusText,"</span>\n                          </li>"));o.prependTo(e),setTimeout(function(){o.addClass("bhojpur-alert__active")},50),setTimeout(function(){$('.bhojpur-alert[data-dismissible="true"]').removeClass("bhojpur-alert__active"),$("#bhojpur-submit-loading").remove()},6e3)}}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(c){var i=window.Mustache,p=window.BHOJPUR,o="bhojpur.action",t="enable."+o,n="click."+o,r='[data-ajax-form="true"][data-method]',a=".bhojpur-action-bulk-buttons",e=".bhojpur-page .bhojpur-table-container",l=".bhojpur-table--bulking",d=".bhojpur-table--bulking tbody tr",f="is_undo",u="mdl-data-table--selectable",h="primary_values[]",m=".bhojpur-body__loading";function s(t,e){this.$element=c(t),this.options=c.extend({},s.DEFAULTS,c.isPlainObject(e)&&e),this.ajaxForm={},this.init()}return s.prototype={constructor:s,init:function(){this.bind(),this.initActions()},bind:function(){this.$element.on(n,".bhojpur-action--bulk",this.renderBulkTable.bind(this)).on(n,".bhojpur-action--exit-bulk",this.removeBulkTable.bind(this)),c(document).on(n,d,this.handleBulkTableClick.bind(this)).on(n,r,this.clickAjaxButton.bind(this))},unbind:function(){this.$element.off(n),c(document).off(n,d,this.handleBulkTableClick).off(n,r,this.clickAjaxButton)},initActions:function(){c(e).find("table").length||(c(a).hide(),c(".bhojpur-page__header a.bhojpur-action--button").hide())},collectFormData:function(){var e,t=c(l).find(".mdl-checkbox__input:checked"),i=[],n=[];return t.length&&t.each(function(){var t=c(this).closest("tr").data("primary-key");e={},t&&(i.push({name:h,value:t.toString()}),e[h]=t.toString(),n.push(e))}),this.ajaxForm.formData=i,this.ajaxForm.normalFormData=n,this.ajaxForm},actionSubmit:function(t){return this.submit(t),!1},handleBulkTableClick:function(t){var t=c(t.target).closest("tr"),e=t.find("td").first(),i=e.find(".mdl-js-checkbox");return i.toggleClass("is-checked"),t.toggleClass("is-selected"),e.find("input").prop("checked",i.hasClass("is-checked")),!1},adjustPageBodyStyle:function(t){var e=c(".bhojpur-page > .bhojpur-page__header"),i=c(".bhojpur-page > .bhojpur-page__body"),n=e.find(".bhojpur-page-subnav__header").length?96:48;t?e.height()>n&&i.css("padding-top",e.height()):parseInt(i.css("padding-top"))>n&&i.css("padding-top","")},renderBulkTable:function(){var t=c("body");t.hasClass("bhojpur-slideout-open")&&t.data("bhojpur.slideout").hide(),c(".bhojpur-table__inner-list").remove(),this.toggleBulkButtons(),this.enableTableMDL(),this.adjustPageBodyStyle(!0)},removeBulkTable:function(){this.toggleBulkButtons(),this.disableTableMDL(),this.adjustPageBodyStyle()},enableTableMDL:function(){c(e).find("table").removeAttr("data-upgraded").addClass(u).trigger("enable")},disableTableMDL:function(){c(e).find("table").removeClass(u).find("tr").removeClass("is-selected").find("td:first,th:first").remove()},toggleBulkButtons:function(){this.$element.find(".bhojpur-action-forms").toggle(),c(a).find("button").toggleClass("hidden"),c(e).toggleClass("bhojpur-table--bulking").find(".bhojpur-table__actions").toggle(),c(".bhojpur-page__header .bhojpur-actions, .bhojpur-page__header .bhojpur-search-container").toggle()},clickAjaxButton:function(t){t=c(t.target);return this.collectFormData(),this.ajaxForm.properties=t.data(),this.submit(t),!1},renderFlashMessage:function(t){var e=s.FLASHMESSAGETMPL;return i.parse(e),i.render(e,t)},addLoading:function(){c(m).remove(),c(s.TEMPLATE_LOADING).appendTo(c("body")).trigger("enable.bhojpur.material")},submit:function(e){var i=this,n=this.ajaxForm||{},t=n.properties||e.data();if(e.hasClass("bhojpur-action-disabled"))return!1;!t.fromIndex||n.formData&&n.formData.length?t.confirm?p.bhojpurConfirm(t,function(t){t&&i.handleAjaxSubmit(n,e)}):this.handleAjaxSubmit(n,e):p.bhojpurConfirm(n.properties.errorNoItem)},handleAjaxSubmit:function(o,r){var s=this,a=this.$element,l=r.closest(".bhojpur-action-forms"),d=o.properties||r.data(),u=d.url,h=d.undoUrl,e=r.hasClass(f),t=r.closest(".bhojpur-slideout").length,i=a.length&&!t;e&&(u=h),this.addLoading(),(l.length?l.find('[data-ajax-form="true"][data-method]'):r).addClass("bhojpur-action-disabled"),c.ajax(u,{method:d.method,data:o.formData,dataType:d.datatype||"json",beforeSend:function(){h?r.prop("disabled",!0):i&&s.switchButtons(a,1)},success:function(t){if(h)return a.trigger("undo.bhojpur.action",[r,e,t]),e?r.removeClass(f):r.addClass(f),void r.prop("disabled",!1);window.location.reload()},error:function(t){200!=t.status&&(h?r.prop("disabled",!1):i&&s.switchButtons(a),p.handleAjaxError(t))},complete:function(t){var e,i,n=t.getResponseHeader("content-type"),t=t.getResponseHeader("Content-Disposition");c(m).remove(),r.prop("disabled",!1),(l.length?l.find('[data-ajax-form="true"][data-method]'):r).removeClass("bhojpur-action-disabled"),t&&-1!==t.indexOf("attachment")&&(e={},i="",null!=(t=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(t))&&t[1]&&(i=t[1].replace(/['"]/g,"")),d.method&&(e=c.extend({},o.normalFormData,{_method:d.method})),p.bhojpurAjaxHandleFile(u,n,i,e),h?r.prop("disabled",!1):s.switchButtons(a))}})},switchButtons:function(t,e){e=!!e;t.find(".bhojpur-action-button").prop("disabled",e)},destroy:function(){this.unbind(),this.$element.removeData(o)}},s.DEFAULTS={},s.TEMPLATE_LOADING='<div class="bhojpur-body__loading">\n                                        <div class="mdl-dialog-bg"></div>\n                                        <div><div class="mdl-spinner mdl-js-spinner is-active bhojpur-layout__bottomsheet-spinner"></div></div>\n                                    </div>',c.fn.bhojpurSliderAfterShow.bhojpurInsertActionData=function(t,e){var e=c(e).find('[data-toggle="bhojpur-action-slideout"]'),i=e.find("form"),n=c(l).find(".mdl-checkbox__input:checked");e.length&&n.length&&n.each(function(){var t=c(this).closest("tr").data("primary-key");t&&i.prepend('<input class="js-primary-value" type="hidden" name="primary_values[]" value="'+t+'" />')})},s.plugin=function(n){return this.each(function(){var t,e=c(this),i=e.data(o);i||e.data(o,i=new s(this,n)),"string"==typeof n&&c.isFunction(t=i[n])&&t.call(i)})},c(function(){var e={},i='[data-toggle="bhojpur.action.bulk"]';c(i).length||c(document).on(n,r,function(t){return(new s).actionSubmit(c(t.target)),!1}),c(document).on("disable.bhojpur.action",function(t){s.plugin.call(c(i,t.target),"destroy")}).on(t,function(t){s.plugin.call(c(i,t.target),e)}).triggerHandler(t)}),s}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(a){var l=window.location,r=window.BHOJPUR,o="bhojpur.advancedsearch",t="enable."+o,e="click."+o;function s(t,e){this.$element=a(t),this.options=a.extend({},s.DEFAULTS,a.isPlainObject(e)&&e),this.init()}return s.prototype={constructor:s,init:function(){this.$form=this.$element.find("form"),this.$modal=a(s.MODAL).appendTo("body"),this.bind()},bind:function(){this.$element.on("submit.bhojpur.advancedsearch","form",this.submit.bind(this)).on(e,".bhojpur-advanced-filter__save",this.showSaveFilter.bind(this)).on(e,".bhojpur-advanced-filter__toggle",this.toggleFilterContent).on(e,".bhojpur-advanced-filter__close",this.closeFilter).on(e,".bhojpur-advanced-filter__delete",this.deleteSavedFilter),this.$modal.on("shown.bhojpur.modal",this.start.bind(this))},closeFilter:function(){a(".bhojpur-advanced-filter__dropdown").hide()},toggleFilterContent:function(t){a(t.target).closest(".bhojpur-advanced-filter__toggle").parent().find(">[advanced-search-toggle]").toggle()},showSaveFilter:function(){this.$modal.bhojpurModal("show")},deleteSavedFilter:function(t){var e=a(t.target).closest(".bhojpur-advanced-filter__delete"),i=e.closest(".bhojpur-advanced-filter__savedfilter"),n=e.data("filter-name"),o=l.pathname;return r.bhojpurConfirm({confirm:"Are you sure you want to delete this saved filter?"},function(t){t&&a.get(o,a.param({delete_saved_filter:n})).done(function(){e.closest("li").remove(),0===i.find("li").length&&i.remove()}).fail(function(){r.bhojpurConfirm("Server error, please try again!")})}),!1},start:function(){this.$modal.trigger("enable.bhojpur.material").on(e,".bhojpur-advanced-filter__savefilter",this.saveFilter.bind(this))},saveFilter:function(){var t=this.$modal.find("#bhojpur-advanced-filter__savename").val();t&&this.$form.prepend('<input type="hidden" name="filter_saving_name" value="'.concat(t,'"  />')).submit()},submit:function(){var t,e=this.$form,i=e.find("input[name],select[name]"),n=[],o=e.closest(".bhojpur-bottomsheets"),r=e.serialize();if(i.each(function(){n.push(a(this).attr("name"))}),t=function(t){var e,i,n=decodeURIComponent(l.search.substr(1)).split("&"),o={};if(1==n.length&&""==n[0])return!1;for(i in n)""!==n[i]&&(e=n[i].split("="),o[e[0]]=e[1]);return t.forEach(function(t){delete o[t]}),o}(n),!a.isEmptyObject(t))for(var s in t)t.hasOwn(s)&&e.prepend('<input type="hidden" name='.concat(s," value=").concat(t[s],"  />"));if(this.$element.find(".bhojpur-advanced-filter__dropdown").hide(),this.removeEmptyPairs(e),o.length){if(o.data().url)return i="".concat(o.data().url,"?").concat(r),o.trigger("reloadFromUrl.bhojpur.bottomsheets",[i]),!1;console.log("dont have base URL! advancedsearch reload failed")}},removeEmptyPairs:function(t){t.find("advanced-filter-group").each(function(){var t=a(this);""==t.find("[filter-required]").val()&&t.remove()})},destroy:function(){this.$element.removeData(o)}},s.DEFAULTS={},s.MODAL='<div class="bhojpur-modal fade" tabindex="-1" role="dialog" aria-hidden="true">\n              <div class="mdl-card mdl-shadow--2dp" role="document">\n                  <div class="mdl-card__title">\n                      <h2 class="mdl-card__title-text">Save advanced filter</h2>\n                  </div>\n                  <div class="mdl-card__supporting-text">\n                          \n                      <div class="mdl-textfield mdl-textfield--full-width mdl-js-textfield">\n                          <input class="mdl-textfield__input" type="text" id="bhojpur-advanced-filter__savename">\n                          <label class="mdl-textfield__label" for="bhojpur-advanced-filter__savename">Please enter name for this filter</label>\n                      </div>\n  \n                  </div>\n                  <div class="mdl-card__actions">\n                      <a class="mdl-button mdl-button--colored mdl-button--raised bhojpur-advanced-filter__savefilter">Save This Filter</a>\n                      <a class="mdl-button mdl-button--colored" data-dismiss="modal">Cancel</a>\n                  </div>\n                  <div class="mdl-card__menu">\n                      <button class="mdl-button mdl-button--icon" data-dismiss="modal" aria-label="close">\n                          <i class="material-icons">close</i>\n                      </button>\n                  </div>\n              </div>\n          </div>',s.plugin=function(n){return this.each(function(){var t,e=a(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new s(this,n))}"string"==typeof n&&a.isFunction(t=i[n])&&t.apply(i)})},a(function(){var e='[data-toggle="bhojpur.advancedsearch"]';a(document).on("disable.bhojpur.advancedsearch",function(t){s.plugin.call(a(e,t.target),"destroy")}).on(t,function(t){s.plugin.call(a(e,t.target),void 0)}).triggerHandler(t)}),s}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(o){var r="bhojpur.autoheight",t="enable."+r;function s(t,e){this.$element=o(t),this.options=o.extend({},s.DEFAULTS,o.isPlainObject(e)&&e),this.init()}return s.prototype={constructor:s,init:function(){var t=this.$element;this.paddingTop=parseInt(t.css("padding-top"),10),this.paddingBottom=parseInt(t.css("padding-bottom"),10),this.resize(),this.bind()},bind:function(){this.$element.on("input",o.proxy(this.resize,this))},unbind:function(){this.$element.off("input",this.resize)},resize:function(){var t=this.$element,e=t.prop("scrollHeight");e?t.height("auto").height(e-this.paddingTop-this.paddingBottom):t.height("40px")},destroy:function(){this.unbind(),this.$element.removeData(r)}},s.DEFAULTS={},s.plugin=function(n){return this.each(function(){var t,e=o(this),i=e.data(r);if(!i){if(/destroy/.test(n))return;e.data(r,i=new s(this,n))}"string"==typeof n&&o.isFunction(t=i[n])&&t.apply(i)})},o(function(){var e="textarea.bhojpur-js-autoheight";o(document).on("disable.bhojpur.autoheight",function(t){s.plugin.call(o(e,t.target),"destroy")}).on(t,function(t){s.plugin.call(o(e,t.target))}).triggerHandler(t)}),s}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(g){var o=window._,n=window.FormData,_=window.BHOJPUR_Translations,r="bhojpur.bottomsheets",t="click."+r,e="submit."+r,i="bhojpur-bottomsheets-open",w=".mdl-layout__content.bhojpur-page",s=".bhojpur-page__body",v=".bhojpur-page__header",l=".bhojpur-bottomsheets__search-input";function a(t,e){var i=[],n=e?"src":"href";return t.each(function(){i.push(g(this).attr(n))}),o.uniq(i)}function d(t,e,i){for(var n=0,o=0,r=t.length;o<r;o++){var s=document.createElement("script");s.onload=function(){++n===t.length&&g.isFunction(i)&&i(),e&&e.url&&e.response&&function(t,e){var i,n=g.fn.bhojpurSliderAfterShow;for(i in n)n.hasOwn(i)&&!n[i].isLoadedInBottomSheet&&"initPublishForm"!=i&&"bhojpurActivityinit"!=i&&(n[i].isLoadedInBottomSheet=!0,n[i].call(this,t,e))}(e.url,e.response)},s.src=t[o],document.body.appendChild(s)}}function j(t,e){this.$element=g(t),this.options=g.extend({},j.DEFAULTS,g.isPlainObject(e)&&e),this.resourseData={},this.init()}return j.prototype={constructor:j,init:function(){this.build(),this.bind()},build:function(){var t;this.$bottomsheets=t=g(j.TEMPLATE).appendTo("body"),this.$body=t.find(".bhojpur-bottomsheets__body"),this.$title=t.find(".bhojpur-bottomsheets__title"),this.$header=t.find(".bhojpur-bottomsheets__header"),this.$bodyClass=g("body").prop("class"),this.filterURL="",this.searchParams=""},bind:function(){this.$bottomsheets.on(e,"form",this.submit.bind(this)).on(t,'[data-dismiss="bottomsheets"]',this.hide.bind(this)).on(t,".bhojpur-pagination-container a",this.pagination.bind(this)).on(t,".bhojpur-bottomsheets__search-button",this.search.bind(this)).on("keyup.bhojpur.bottomsheets",this.keyup.bind(this)).on("selectorChanged.bhojpur.selector",this.selectorChanged.bind(this)).on("filterChanged.bhojpur.filter",this.filterChanged.bind(this)).on("reloadFromUrl.bhojpur.bottomsheets",this.reloadFromUrl.bind(this))},unbind:function(){this.$bottomsheets.off(e,"form").off(t).off("selectorChanged.bhojpur.selector").off("filterChanged.bhojpur.filter")},bindActionData:function(t){for(var e=this.$body.find('[data-toggle="bhojpur-action-slideout"]').find("form"),i=t.length-1;0<=i;i--)e.prepend('<input type="hidden" name="primary_values[]" value="'+t[i]+'" />')},filterChanged:function(t,e,i){e=this.constructloadURL(e,i);return e&&this.reload(e),!1},selectorChanged:function(t,e,i){e=this.constructloadURL(e,i);return e&&this.reload(e),!1},keyup:function(t){var e=this.$bottomsheets.find(l);13===t.which&&e.length&&e.is(":focus")&&this.search()},search:function(){var t=this.$bottomsheets,e=t.data().url,t=g.trim(t.find(l).val()),i=e+"?keyword="+t;/\?/g.test(e)&&(i=e+"&keyword="+t),this.reload(i)},pagination:function(t){t=g(t.target).closest("a").prop("href");return t&&this.reload(t),!1},reload:function(t){var e=this.$bottomsheets.find(s);this.addLoading(e),this.fetchPage(t)},reloadFromUrl:function(t,e){this.reload(e)},fetchPage:function(i){var n=this.$bottomsheets,o=this;g.get(i,function(t){var t=g(t).find(w),e=t.find(v),t=t.find(s);t.length?(n.find(s).html(t.html()),e.length&&(o.$body.find(v).html(e.html()).trigger("enable"),o.addHeaderClass()),n.trigger("reload.bhojpur.bottomsheets")):o.reload(i)}).fail(function(){window.alert("server error, please try again later!")})},constructloadURL:function(t,e){var i,n,o=this.filterURL,r=this.$bottomsheets.data().url;if(!o){if(!r)return;o=r}return r=new URL("https://www.bhojpur.net/"+t),t=e,r=r.search,t=t.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),r=null===(t=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(decodeURIComponent(r)))?"":t[1].replace(/\+/g," "),o=this.filterURL=(t=e,e=r,r=o,i=String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"),i=new RegExp("([?&])"+i+"=.*?(&|$)","i"),n=-1!==r.indexOf("?")?"&":"?",r.match(i)?e?r.replace(i,"$1"+t+"="+e+"$2"):"?"===RegExp.$1||RegExp.$1===RegExp.$2?r.replace(i,"$1"):r.replace(i,""):e?r+n+t+"="+e:void 0)},addHeaderClass:function(){this.$body.find(v).hide(),this.$bottomsheets.find(v).children(".bhojpur-bottomsheet__filter").length&&this.$body.addClass("has-header").find(v).show()},addLoading:function(t){t.html(""),g(j.TEMPLATE_LOADING).appendTo(t).trigger("enable.bhojpur.material")},loadExtraResource:function(t){i=t.$links,n=g("link"),i=a(i),n=a(n);var e,i=o.difference(i,n),n=(n=t.$scripts,e=g("script"),n=a(n,!0),e=a(e,!0),o.difference(n,e));i.length&&function t(e){var i=document.createElement("link"),n=e.shift();i.type="text/css",i.rel="stylesheet",i.onload=function(){e.length&&t(e)},i.href=n,document.getElementsByTagName("head")[0].appendChild(i)}(i),n.length&&d(n,t)},loadMedialibraryJS:function(t){var e,t=t.filter("script"),i=/theme=media_library/g,n=this;t.each(function(){var t;e=g(this).prop("src"),i.test(e)&&((t=document.createElement("script")).src=e,document.body.appendChild(t),n.mediaScriptAdded=!0)})},submit:function(t){var o,e=t.target,r=g(e),s=this,a=r.prop("action"),l=r.closest(".bhojpur-bottomsheets"),d=l.data(),i=d.ajaxType,u=r.find(":submit");d.ingoreSubmit||r.data().normalSubmit||(g(document).trigger("bottomsheetBeforeSend.bhojpur.bottomsheets"),t.preventDefault(),o=new n(e),g.ajax(a,{method:r.prop("method"),data:o,dataType:i||"html",processData:!1,contentType:!1,beforeSend:function(){u.prop("disabled",!0)},success:function(t,e,i){if(d.ajaxMute)l.remove();else if(d.ajaxTakeover)d.$target.parent().trigger("ajaxSuccessed.bhojpur.bottomsheets",[t,l]);else{var n,t=i.getResponseHeader("Content-Disposition");if(t&&-1!==t.indexOf("attachment"))return t=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(t),i=i.getResponseHeader("Content-Type"),n="",null!=t&&t[1]&&(n=t[1].replace(/['"]/g,"")),window.BHOJPUR.bhojpurAjaxHandleFile(a,i,n,o),void u.prop("disabled",!1);g(".bhojpur-error").remove();t=r.data("returnUrl"),i=r.data("refreshUrl");i?window.location.href=i:"refresh"!=t?(t&&"refresh"!=t?s.load(t):s.refresh(),g(document).trigger("bottomsheetSubmitComplete.bhojpur.bottomsheets")):s.refresh()}},error:function(t){window.BHOJPUR.handleAjaxError(t)},complete:function(){u.prop("disabled",!1)}}))},load:function(s,a,l){var d,t,b=this.options,u=a.actionData,h=this.resourseData,c=h.selectModal,y=h.ingoreSubmit,p=this.$bottomsheets,f=this.$header,m=this.$body;s&&(this.show(),this.addLoading(m),this.filterURL=s,m.removeClass("has-header has-hint"),a=g.isPlainObject(a)?a:{},d=a.method||"GET",t=a.datatype||"html",g.proxy(function(){g.ajax(s,{method:d,dataType:t,success:g.proxy(function(t){var e,i,n,o,r;"GET"===d?(i={$scripts:(e=g(t)).filter("script"),$links:e.filter("link"),url:s,response:t},n=c&&e.find(".bhojpur-search-container").length,o=t.match(/<\s*body.*>[\s\S]*<\s*\/body\s*>/gi),r=e.find(w),o&&(o=o.join("").replace(/<\s*body/gi,"<div").replace(/<\s*\/body/gi,"</div"),o=g(o).prop("class"),g("body").addClass(o)),r.length&&(this.loadExtraResource(i),y&&r.find(v).remove(),r.find(".bhojpur-button--cancel").attr("data-dismiss","bottomsheets"),m.html(r.html()),this.$title.html(e.find(b.title).html()),a.selectDefaultCreating&&this.$title.append('<button class="mdl-button mdl-button--primary" type="button" data-load-inline="true" data-select-nohint="'.concat(a.selectNohint,'" data-select-modal="').concat(a.selectModal,'" data-select-listing-url="').concat(a.selectListingUrl,'">').concat(a.selectBacktolistTitle,"</button>")),c&&(m.find(".bhojpur-button--new").data("ingoreSubmit",!0).data("selectId",h.selectId).data("loadInline",!0),"one"==c||a.selectNohint||void 0!==h.maxItem&&"1"==h.maxItem||m.addClass("has-hint"),"mediabox"!=c||this.mediaScriptAdded||this.loadMedialibraryJS(e)),f.find(".bhojpur-button--new").remove(),this.$title.after(m.find(".bhojpur-button--new")),n&&(p.addClass("has-search"),f.find(".bhojpur-bottomsheets__search").remove(),f.prepend(j.TEMPLATE_SEARCH)),u&&u.length&&this.bindActionData(u),h.bottomsheetClassname&&p.addClass(h.bottomsheetClassname),p.trigger("enable"),p.one("hidden.bhojpur.bottomsheets",function(){g(this).trigger("disable")}),this.addHeaderClass(),p.data(a),l&&g.isFunction(l)&&l(this.$bottomsheets),p.trigger("bottomsheetLoaded.bhojpur.bottomsheets",[s,t]))):a.returnUrl?this.load(a.returnUrl):this.refresh()},this),error:g.proxy(function(){var t;this.$bottomsheets.remove(),g(".bhojpur-bottomsheets").is(":visible")||g("body").removeClass(i),t=0<g(".bhojpur-error span").length?g(".bhojpur-error span").map(function(){return g(this).text()}).get().join(", "):_.serverError,window.alert(t)},this)})},this)())},open:function(t,e){t.loadInline||this.init(),this.resourseData=t,this.load(t.url,t,e)},show:function(){this.$bottomsheets.addClass("is-shown").get(0).offsetHeight,this.$bottomsheets.addClass("is-slided"),g("body").addClass(i)},hide:function(t){var t=g(t.target).closest(".bhojpur-bottomsheets"),e=g(".bhojpur-datepicker").not(".hidden");return e.length&&e.addClass("hidden"),t.bhojpurSelectCore("destroy"),t.trigger("bottomsheetClosed.bhojpur.bottomsheets").remove(),g(".bhojpur-bottomsheets").is(":visible")||g("body").removeClass(i),!1},refresh:function(){this.$bottomsheets.remove(),g("body").removeClass(i),setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind(),this.$element.removeData(r)}},j.DEFAULTS={title:".bhojpur-form-title, .mdl-layout-title",content:!1},j.TEMPLATE_ERROR='<ul class="bhojpur-error"><li><label><i class="material-icons">error</i><span>[[error]]</span></label></li></ul>',j.TEMPLATE_LOADING='<div style="text-align: center; margin-top: 30px;"><div class="mdl-spinner mdl-js-spinner is-active bhojpur-layout__bottomsheet-spinner"></div></div>',j.TEMPLATE_SEARCH='<div class="bhojpur-bottomsheets__search">\n              <input autocomplete="off" type="text" class="mdl-textfield__input bhojpur-bottomsheets__search-input" placeholder="Search" />\n              <button class="mdl-button mdl-js-button mdl-button--icon bhojpur-bottomsheets__search-button" type="button"><i class="material-icons">search</i></button>\n          </div>',j.TEMPLATE='<div class="bhojpur-bottomsheets">\n              <div class="bhojpur-bottomsheets__header">\n              <h3 class="bhojpur-bottomsheets__title"></h3>\n              <button type="button" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect bhojpur-bottomsheets__close" data-dismiss="bottomsheets">\n              <span class="material-icons">close</span>\n              </button>\n              </div>\n              <div class="bhojpur-bottomsheets__body"></div>\n          </div>',g.fn.bhojpurBottomSheets=j.plugin=function(n){return this.each(function(){var t,e=g(this),i=e.data(r);if(!i){if(/destroy/.test(n))return;e.data(r,i=new j(this,n))}"string"==typeof n&&g.isFunction(t=i[n])&&t.apply(i)})},j}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var o="bhojpur.chooser",t="enable."+o;function s(t,e){this.$element=r(t),this.options=r.extend({},s.DEFAULTS,r.isPlainObject(e)&&e),this.init()}return s.prototype={constructor:s,init:function(){var i=this.$element,t=i.data(),e={minimumResultsForSearch:8,dropdownParent:i.parent()},n=window.getSelect2AjaxDynamicURL,o=t.remoteImage;t.remoteData&&(e.ajax=r.fn.select2.ajaxCommonOptions(t),n&&r.isFunction(n)?e.ajax.url=function(){return n(t)}:e.ajax.url=t.remoteUrl,e.templateResult=function(t){var e=i.parents(".bhojpur-field").find('[name="select2-result-template"]');return r.fn.select2.ajaxFormatResult(t,e,o)},e.templateSelection=function(t){if(t.loading)return t.text;var e=i.parents(".bhojpur-field").find('[name="select2-selection-template"]');return r.fn.select2.ajaxFormatResult(t,e,o)}),i.on("select2:select",function(t){r(t.target).attr("chooser-selected","true")}).on("select2:unselect",function(t){r(t.target).attr("chooser-selected","")}),i.select2(e),this.resetSelect2Width(),e=window._.debounce(this.resetSelect2Width.bind(this),300),r(window).resize(e),i.val()&&i.attr("chooser-selected","true")},resetSelect2Width:function(){var t=this.$element.data().select2;t&&t.$container&&(t=t.$container).width(t.parent().width())},destroy:function(){this.$element.select2("destroy").removeData(o)}},s.DEFAULTS={},s.plugin=function(n){return this.each(function(){var t,e=r(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new s(this,n))}"string"==typeof n&&r.isFunction(t=i[n])&&t.apply(i)})},r(function(){var e='select[data-toggle="bhojpur.chooser"]';r(document).on("disable.bhojpur.chooser",function(t){s.plugin.call(r(e,t.target),"destroy")}).on(t,function(t){s.plugin.call(r(e,t.target))}).triggerHandler(t)}),s}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(y){var n=window.URL||window.webkitURL,r="bhojpur.cropper",t="enable."+r,o="change."+r,u="click."+r,e="shown.bhojpur.modal",i="hidden.bhojpur.modal",v=".bhojpur-cropper__toggle",c=".bhojpur-cropper__wrapper",h=".bhojpur-cropper__options",a=".bhojpur-cropper__toggle--crop";function g(t,e){var e=String(e),i=e.toLowerCase(),n=e.toUpperCase(),e=e="string"==typeof(e=e)?e.charAt(0).toUpperCase()+e.substr(1):e;if(y.isPlainObject(t))return t[i]||t[e]||t[n]}function l(t){return/.svg$/.test(t)}function s(t,e){this.$element=y(t),this.options=y.extend(!0,{},s.DEFAULTS,y.isPlainObject(e)&&e),this.data=null,this.init()}return s.prototype={constructor:s,init:function(){var t,e,i=this.options,n=this.$element,o=n.closest(i.parent),r=this;o.length||(o=n.parent()),this.$parent=o,this.$output=o.find(i.output),this.$formCropInput=o.closest("form").find('input[name="BhojpurResource.MediaOption"]:hidden'),this.$list=o.find(i.list),(n=this.$output.data("fetchSizedata"))?y.getJSON(n,function(t){e=JSON.parse(t.MediaOption),r.$output.val(JSON.stringify(t)),r.$formCropInput.val(JSON.stringify(t)),r.data=e||{},l(e.URL||e.Url)&&r.resetImage(),r.build(),r.bind()}):((o=y.trim(this.$output.val()))&&l((t=JSON.parse(o)).URL||t.Url)&&this.resetImage(),this.data=t||{},this.build(),this.bind())},resetImage:function(){this.$parent.addClass("is-svg")},build:function(){var t,i,e=this.$output.data(),n={};e&&(n={title:e.cropperTitle,ok:e.cropperOk,cancel:e.cropperCancel},t=this.options.text),n.ok&&n.title&&n.cancel&&(t=n),this.wrap(),this.$modal=y((e=t,"string"==typeof(i=s.MODAL)&&"object"===_typeof(e)&&y.each(e,function(t,e){i=i.replace("$["+String(t).toLowerCase()+"]",e)}),i)).appendTo("body")},unbuild:function(){this.$modal.remove(),this.unwrap()},wrap:function(){var t=this.$list,e=t.find("img").not(".is-svg");e.length?(t.find("li").append(s.TOGGLE),e.wrap(s.CANVAS),this.center(e)):t.find(a).remove()},unwrap:function(){var t=this.$list;t.find(v).remove(),t.find(".bhojpur-cropper__canvas").each(function(){var t=y(this);t.before(t.html()).remove()})},bind:function(){this.$element.on(o,y.proxy(this.read,this)),this.$list.on(u,y.proxy(this.click,this)),this.$modal.on(e,y.proxy(this.start,this)).on(i,y.proxy(this.stop,this))},unbind:function(){this.$element.off(o,this.read),this.$list.off(u,this.click),this.$modal.off(e,this.start).off(i,this.stop)},click:function(t){var e,t=t.target,i=this.data;t!==this.$list[0]&&((t=y(t)).closest(".bhojpur-cropper__toggle--delete").length&&(i.Delete=!0,this.$output.val(JSON.stringify(i)),this.$formCropInput.val(JSON.stringify(i)),this.$list.hide(),(e=y(s.ALERT)).find(".bhojpur-fieldset__undo").one(u,function(){e.remove(),this.$list.show(),delete i.Delete,this.$output.val(JSON.stringify(i)),this.$formCropInput.val(JSON.stringify(i))}.bind(this)),this.$parent.find(".bhojpur-fieldset").append(e)),t.closest(a).length&&(t=t.closest("li").find("img"),this.$target=t,this.$modal.bhojpurModal("show")))},read:function(t){var t=t.target.files,e=this.$list,i=this.$parent.find(".bhojpur-fieldset__alert");e.show(),i.length&&i.remove(),t&&t.length&&(i=t[0],/^image\//.test(i.type)&&n?(this.fileType=i.type,this.load(n.createObjectURL(i)),this.$parent.find(".bhojpur-medialibrary__image-desc").show()):e.empty().html(s.FILE_LIST.replace("{{filename}}",i.name)))},load:function(t,a,l){var d,u=this.options,h=this,c=this.$list,e=y(s.LIST),p=this.data||{},f=this.$output.val()?JSON.parse(this.$output.val()):{},m=["Video","SelectedType","Description"],b=this.fileType;a||(c.find("ul").remove(),c.html(e)),e=c.find("img"),this.wrap(),d=e.length,e.one("load",function(){if("image/svg+xml"===b)return c.find(v).remove(),!1;var t=y(this),e=this.naturalWidth,i=this.naturalHeight,n=t.data(),o=n.sizeResolution,r=n.sizeName,s=n.sizeResolutionWidth,n=n.sizeResolutionHeight;o?(s||n||(s=g(o,"width"),n=g(o,"height")),e<i*(o=n&&s?s/n:e/i)?n=(s=e)/o:s=(n=i)*o,o={naturalWidth:e,naturalHeight:i},e={x:Math.round((e-s)/2),y:Math.round((i-n)/2),width:Math.round(s),height:Math.round(n)},h.preview(t,o,e),r&&(p.Crop=!0,p[u.key]||(p[u.key]={}),"original"!=r&&(p[u.key][r]=e))):h.center(t),""!==p.Crop&&a||delete p.Crop,a||(p.CropOptions=null,delete p.Sizes),delete p.Delete,m.forEach(function(t){f[t]&&(p[t]=f[t])}),h.$output.val(JSON.stringify(p)),h.$formCropInput.val(JSON.stringify(p)),r&&p[u.key]&&Object.keys(p[u.key]).length>=d&&l&&y.isFunction(l)&&l()}).attr("src",t).data("originalUrl",t),c.show()},start:function(){var o=this.options,r=this.$modal,t=this.$target,e=t.data(),s=e.sizeName||"original",i=e.sizeResolution,t=e&&e.originalUrl&&t.attr("data-original-url")?/\.original\./.test(e.originalUrl)?e.originalUrl:/\.original\./.test(t.attr("data-original-url"))?t.attr("data-original-url"):t.attr("data-original-url").replace(/file\./,"file.original."):t.attr("src"),a=y("<img src=".concat(t,">")),l=this.data||{},d=this,t=NaN,n=e.sizeResolutionWidth,e=e.sizeResolutionHeight;i&&(n||e||(n=g(i,"width"),e=g(i,"height")),t=n/e),l[o.key]||(l[o.key]={}),r.trigger("enable.bhojpur.material").find(c).html(a),(i=this.getList(t))&&r.find(h).show().append(i),a.cropper({aspectRatio:t,data:function(t){var e,i={};if(y.isPlainObject(t))for(e in t)t.hasOwn(e)&&(i[String(e).toLowerCase()]=t[e]);return i}(l[o.key][s]),background:!1,movable:!1,zoomable:!1,scalable:!1,rotatable:!1,autoCropArea:1,ready:function(){r.find(".bhojpur-cropper__options-toggle").on(u,function(){r.find(".bhojpur-cropper__options-input").prop("checked",y(this).prop("checked"))}).prop("checked",!0),r.find(".bhojpur-cropper__save").one(u,function(){var t,e=a.cropper("getData",!0),i=a.cropper("getCroppedCanvas"),n=[];if(l.Crop=!0,l[o.key][s]=e,d.imageData=a.cropper("getImageData"),d.cropData=e,i)try{t=i.toDataURL()}catch(t){console.log(t),console.log("Please check image Cross-origin setting")}r.find(h+" input").each(function(){var t=y(this);t.prop("checked")&&n.push(t.attr("name"))}),d.output(t,n),r.bhojpurModal("hide")})}})},stop:function(){this.$modal.trigger("disable.bhojpur.material").find(c+" > img").cropper("destroy").remove().end().find(h).hide().find("ul").remove()},getList:function(o){var r=[];return this.$list.find("img").not(this.$target).each(function(){var t=y(this).data(),e=t.sizeResolution,i=t.sizeName,n=t.sizeResolutionWidth,t=t.sizeResolutionHeight;e&&(n||t||(n=g(e,"width"),t=g(e,"height")),n/t===o&&r.push('<label><input class="bhojpur-cropper__options-input" type="checkbox" name="'+i+'" checked> <span>'+i+"<small>("+n+"&times;"+t+" px)</small></span></label>"))}),r.length?"<ul><li>"+r.join("</li><li>")+"</li></ul>":""},output:function(t,e){var i=this.$target;t?this.center(i.attr("src",t),!0):this.preview(i),y.isArray(e)&&e.length&&this.autoCrop(t,e),this.$output.val(JSON.stringify(this.data)).trigger(o),this.$formCropInput.val(JSON.stringify(this.data))},preview:function(t,e,i){var n=t.parent().parent(),o=n.width(),n=n.height(),e=e||this.imageData,i=y.extend({},i||this.cropData),r=i.width/i.height,s=o;0!=s&&0!=e.naturalWidth&&0!=e.naturalHeight&&(i=i.width/(s=n*r<=o?n*r:s),t.css({maxWidth:e.naturalWidth/i,maxHeight:e.naturalHeight/i}),this.center(t))},center:function(t,o){t.each(function(){var t=y(this),i=t.parent(),n=i.parent();function e(){var t=n.height(),e=i.height(),t=e<t?(t-e)/2:"auto";i.css("margin-top",t)}o&&i.add(t).removeAttr("style"),this.complete?e.call(this):this.onload=e})},autoCrop:function(i,n){var o=this.cropData,r=this.data[this.options.key],s=this;this.$list.find("img").not(this.$target).each(function(){var t=y(this),e=t.data("sizeName");-1<y.inArray(e,n)&&(r[e]=y.extend({},o),i?s.center(t.attr("src",i),!0):s.preview(t))})},destroy:function(){this.$element.removeData(r)}},s.DEFAULTS={parent:!1,output:!1,list:!1,key:"data",data:null,text:{title:"Crop the image",ok:"OK",cancel:"Cancel"}},s.TOGGLE='<div class="bhojpur-cropper__toggle">\n            <div class="bhojpur-cropper__toggle--crop"><i class="material-icons">crop</i></div>\n            <div class="bhojpur-cropper__toggle--delete"><i class="material-icons">delete</i></div>\n        </div>',s.ALERT='<div class="bhojpur-fieldset__alert">\n            <button class="mdl-button mdl-button--accent bhojpur-fieldset__undo" type="button">Undo delete</button>\n        </div>',s.CANVAS='<div class="bhojpur-cropper__canvas"></div>',s.LIST="<ul><li><img></li></ul>",s.FILE_LIST='<div class="bhojpur-file__list-item">\n                                <span><span>{{filename}}</span></span>\n                                <div class="bhojpur-cropper__toggle">\n                                    <div class="bhojpur-cropper__toggle--delete"><i class="material-icons">delete</i></div>\n                                </div>\n                            </div>',s.MODAL='<div class="bhojpur-modal fade" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n                <div class="mdl-card__title">\n                    <h2 class="mdl-card__title-text">$[title]</h2>\n                </div>\n                <div class="mdl-card__supporting-text">\n                    <div class="bhojpur-cropper__wrapper"></div>\n                    <div class="bhojpur-cropper__options">\n                        <p>Sync cropping result to: <label><input type="checkbox" class="bhojpur-cropper__options-toggle" checked/> All</label></p>\n                    </div>\n                </div>\n                <div class="mdl-card__actions mdl-card--border">\n                    <a class="mdl-button mdl-button--colored mdl-button--raised bhojpur-cropper__save">$[ok]</a>\n                    <a class="mdl-button mdl-button--colored" data-dismiss="modal">$[cancel]</a>\n                </div>\n                <div class="mdl-card__menu">\n                    <button class="mdl-button mdl-button--icon" data-dismiss="modal" aria-label="close">\n                        <i class="material-icons">close</i>\n                    </button>\n                </div>\n            </div>\n        </div>',s.plugin=function(o){return this.each(function(){var t,e,i=y(this),n=i.data(r);if(!n){if(!y.fn.cropper)return;if(/destroy/.test(o))return;t=y.extend(!0,{},i.data(),"object"===_typeof(o)&&o),i.data(r,n=new s(this,t))}"string"==typeof o&&y.isFunction(e=n[o])&&e.apply(n)})},y(function(){var e=".bhojpur-file__input",i={parent:".bhojpur-file",output:".bhojpur-file__options",list:".bhojpur-file__list",key:"CropOptions"};y(document).on(t,function(t){s.plugin.call(y(e,t.target),i)}).on("disable.bhojpur.cropper",function(t){s.plugin.call(y(e,t.target),"destroy")}).triggerHandler(t)}),s}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var s="bhojpur.datepicker",t="enable."+s,a="pick."+s,l="click."+s,d=".bhojpur-datepicker__embedded",u=".bhojpur-datepicker__save";function h(t,e){this.$element=r(t),this.options=r.extend(!0,{},h.DEFAULTS,r.isPlainObject(e)&&e),this.date=null,this.formatDate=null,this.built=!1,this.pickerData=this.$element.data(),this.$parent=this.$element.closest("[data-picker-type]"),this.isDateTimePicker="datetime"==this.$parent.data("picker-type"),this.$targetInput=this.$parent.find(this.pickerData.targetInput||(this.isDateTimePicker?".bhojpur-datetimepicker__input":".bhojpur-datepicker__input")),this.init()}return h.prototype={init:function(){this.$targetInput.is(":disabled")?this.$element.remove():this.bind()},bind:function(){this.$element.on(l,r.proxy(this.show,this))},unbind:function(){this.$element.off(l,this.show)},build:function(){var i,t=this.$element,e=this.$targetInput,n=e.val(),o={date:new Date,inline:!0};this.built||(t.is(":input")&&Date.parse(t.val())?o.date=new Date(t.val()):n&&Date.parse(n)&&(o.date=new Date(n)),this.$modal=n=r((i=h.TEMPLATE,t=this.options.text,"string"==typeof i&&"object"===_typeof(t)&&r.each(t,function(t,e){i=i.replace("$["+String(t).toLowerCase()+"]",e)}),i)).appendTo("body"),e.data("start-date")&&(o.startDate=new Date(e.data("start-date"))),e.data("end-date")&&(o.endDate=new Date(e.data("end-date"))),n.find(d).on(a,r.proxy(this.change,this)).bhojpurDatepicker(o).triggerHandler(a),n.find(u).on(l,r.proxy(this.pick,this)),this.built=!0)},unbuild:function(){this.built&&this.$modal.find(d).off(a,this.change).bhojpurDatepicker("destroy").end().find(u).off(l,this.pick).end().remove()},change:function(t){var e,i=this.$modal,t=r(t.target);this.date=e=t.bhojpurDatepicker("getDate"),this.formatDate=t.bhojpurDatepicker("getDate",!0),i.find(".bhojpur-datepicker__picked-year").text(e.getFullYear()),i.find(".bhojpur-datepicker__picked-date").text([t.bhojpurDatepicker("getDayName",e.getDay(),!0)+",",String(t.bhojpurDatepicker("getMonthName",e.getMonth(),!0)),e.getDate()].join(" "))},show:function(){this.built||this.build(),this.$modal.bhojpurModal("show")},pick:function(){var t,e,i=this.$targetInput,n=this.formatDate;this.isDateTimePicker&&(t=/^\d{4}-\d{1,2}-\d{1,2}/,e=i.val(),t.test(e)?n=e.replace(t,n):n+=" 00:00"),i.val(n).trigger("change"),this.$modal.bhojpurModal("hide")},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(s)}},h.DEFAULTS={text:{title:"Pick a date",ok:"OK",cancel:"Cancel"}},h.TEMPLATE='<div class="bhojpur-modal fade bhojpur-datepicker" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n                <div class="mdl-card__title">\n                    <h2 class="mdl-card__title-text">$[title]</h2>\n                </div>\n                <div class="mdl-card__supporting-text">\n                    <div class="bhojpur-datepicker__picked">\n                        <div class="bhojpur-datepicker__picked-year"></div>\n                        <div class="bhojpur-datepicker__picked-date"></div>\n                    </div>\n                    <div class="bhojpur-datepicker__embedded"></div>\n                </div>\n                <div class="mdl-card__actions">\n                    <a class="mdl-button mdl-button--colored  mdl-button--raised bhojpur-datepicker__save">$[ok]</a>\n                    <a class="mdl-button mdl-button--colored " data-dismiss="modal">$[cancel]</a>\n                </div>\n            </div>\n        </div>',h.plugin=function(o){return this.each(function(){var t,e,i=r(this),n=i.data(s);if(!n){if(!r.fn.bhojpurDatepicker)return;if(/destroy/.test(o))return;t=r.extend(!0,{},i.data(),"object"===_typeof(o)&&o),i.data(s,n=new h(this,t))}"string"==typeof o&&r.isFunction(e=n[o])&&e.apply(n)})},r(function(){var e='[data-toggle="bhojpur.datepicker"]';r(document).on("disable.bhojpur.datepicker",function(t){h.plugin.call(r(e,t.target),"destroy")}).on(t,function(t){h.plugin.call(r(e,t.target))}).triggerHandler(t)}),h}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(u){u.fn.extend({dirtyForm:function a(t,l){var d=!1;return this instanceof jQuery?(l=t,t=this):t instanceof jQuery||(t=u(t)),t.each(function(t,e){var i=u(e);if(i.is("form"))return!i.hasClass("ignore-dirtyform")&&(!(d=a(i.find('input:not([type="hidden"]):not(".search-field input"):not(".chosen-search input"):not(".ignore-dirtyform"), textarea, select'),l))&&void 0);if(i.is(":checkbox")||i.is(":radio"))return!i.hasClass("ignore-dirtyform")&&(e.checked!=e.defaultChecked?!(d=!0):void 0);if(i.is("input")||i.is("textarea"))return!i.hasClass("ignore-dirtyform")&&(e.value!=e.defaultValue?!(d=!0):void 0);if(i.is("select")){if(i.hasClass("ignore-dirtyform"))return!1;for(var n,o=0,r=e.options.length,s=0;s<r;s++)n=e.options[s],d=d||n.selected!=n.defaultSelected,n.defaultSelected&&(o=s);return(d=d&&!e.multiple?o!=e.selectedIndex:d)?!1:void 0}}),d}}),u(function(){u(document).on("submit","form",function(){u.fn.bhojpurSlideoutBeforeHide=null}),u(document).on("change","form",function(){u(this).dirtyForm()?u.fn.bhojpurSlideoutBeforeHide=!0:u.fn.bhojpurSlideoutBeforeHide=null})})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(s){var a=window.location,e=s(document),o="bhojpur.filter",t="enable."+o,i="click."+o,r=".bhojpur-bottomsheets",l=".bhojpur-filter__dropdown",d="is-selected";function u(t,e){this.$element=s(t),this.options=s.extend({},u.DEFAULTS,s.isPlainObject(e)&&e),this.init()}return u.prototype={constructor:u,init:function(){this.bind();var t=this.$element,e=window.moment();this.$timeStart=t.find(".bhojpur-filter__start"),this.$timeEnd=t.find(".bhojpur-filter__end"),this.$searchParam=t.find("[data-search-param]"),this.$searchButton=t.find(this.options.button),this.startWeekDate=e.startOf("isoweek").toDate(),this.endWeekDate=e.endOf("isoweek").toDate(),this.startMonthDate=e.startOf("month").toDate(),this.endMonthDate=e.endOf("month").toDate(),this.initActionTemplate()},bind:function(){var t=this.options;this.$element.on(i,t.trigger,this.show.bind(this)).on(i,t.label,this.setFilterTime.bind(this)).on(i,t.clear,this.clear.bind(this)).on(i,t.button,this.search.bind(this)),e.on(i,this.close)},unbind:function(){this.$element.off(i)},initActionTemplate:function(){var t=this.$element.data("schedule-from"),e=this.$element.data("schedule-to"),t=this.getUrlParameter(t||"schedule_start_at"),e=this.getUrlParameter(e||"schedule_end_at"),i=s(this.options.trigger);(t||e)&&(this.$timeStart.val(t),this.$timeEnd.val(e),e=e?" - "+e:"",i.addClass("active clearable").find(".bhojpur-selector-label").html(t+e),i.append('<i class="material-icons bhojpur-selector-clear">clear</i>'))},show:function(){this.$element.find(l).toggle()},close:function(t){var t=s(t.target),e=s(l),i=e.is(":visible"),n=t.closest(l).length,o=t.closest(".bhojpur-filter-toggle").length,r=t.closest(".bhojpur-modal").length,t=t.closest(".ui-timepicker-wrapper").length;i&&(n||o||r||t)||e.hide()},setFilterTime:function(t){var e,i,t=s(t.target),n=t.data(),o=n.filterRange;if(!o)return!1;if(s(this.options.label).removeClass(d),t.addClass(d),"events"==o)return this.$timeStart.val(n.scheduleStartAt||""),this.$timeEnd.val(n.scheduleEndAt||""),this.$searchButton.click(),!1;switch(o){case"today":e=i=new Date;break;case"week":e=this.startWeekDate,i=this.endWeekDate;break;case"month":e=this.startMonthDate,i=this.endMonthDate}if(!e||!i)return!1;t=this.getTime(e)+" 00:00",n=this.getTime(i)+" 23:59",this.$timeStart.val(t),this.$timeEnd.val(n),this.$searchButton.click()},getTime:function(t){var e=(e=t.getMonth()+1)<10?"0"+e:e,i=(i=t.getDate())<10?"0"+i:i;return t.getFullYear()+"-"+e+"-"+i},clear:function(){var t=s(this.options.trigger),e=t.find(".bhojpur-selector-label");return t.removeClass("active clearable"),e.html(e.data("label")),this.$timeStart.val(""),this.$timeEnd.val(""),this.$searchButton.click(),!1},getUrlParameter:function(t){var e=decodeURIComponent(a.search),t=t.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),t=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===t?"":t[1].replace(/\+/g," ")},updateQueryStringParameter:function(t,e,i){var i=i||a.href,n=i.match(/#\S*$/)||"",o=String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"),o=new RegExp("([?&])"+o+"=.*?(&|$)","i"),r=-1!==i.indexOf("?")?"&":"?";return n&&(n=n[0],i=i.replace(n,"")),i.match(o)?i=e?i.replace(o,"$1"+t+"="+e+"$2"):"?"===RegExp.$1||RegExp.$1===RegExp.$2?i.replace(o,"$1"):i.replace(o,""):e&&(i=i+r+t+"="+e),i+n},search:function(){var t=this.$searchParam,i=a.href,n=this;t.length&&(t.each(function(){var t=s(this),e=t.data().searchParam,t=t.val();i=n.updateQueryStringParameter(e,t,i)}),this.$element.closest(r).length?s(r).trigger("filterChanged.bhojpur.filter",[i,"bhojpur.filter.time"]):a.href=i)},destroy:function(){this.unbind(),this.$element.removeData(o)}},u.DEFAULTS={label:!1,trigger:!1,button:!1,clear:!1},u.plugin=function(n){return this.each(function(){var t,e=s(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new u(this,n))}"string"==typeof n&&s.isFunction(t=i[n])&&t.apply(i)})},s(function(){var e='[data-toggle="bhojpur.filter.time"]',i={label:".bhojpur-filter__block-buttons button",trigger:"a.bhojpur-filter-toggle",button:".bhojpur-filter__button-search",clear:".bhojpur-selector-clear"};s(document).on("disable.bhojpur.filter",function(t){u.plugin.call(s(e,t.target),"destroy")}).on(t,function(t){u.plugin.call(s(e,t.target),i)}).triggerHandler(t)}),u}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(d){var u=window.location,o="bhojpur.filter",t="enable."+o,e="click."+o,i="change."+o,h=".bhojpur-bottomsheets";function c(t,i){var n,e=u.search,o=u.search.match(/per_page=\d+/),e=e.replace(/per_page=\d+/g,"").replace(/page=\d+/,"page=1");return o&&o.length&&(e=e+"&"+o[0]),d.isArray(t)&&(n=p(e),d.each(t,function(t,e){-1===(t=d.inArray(e,n))?n.push(e):i&&n.splice(t,1)}),e="?"+n.join("&")),e}function p(t){var e=[];return e=t&&-1<t.indexOf("?")&&(t=(t=t.replace(/\+/g," ").split("?")[1])&&-1<t.indexOf("#")?t.split("#")[0]:t)?d.map(t.split("&"),function(t){var e=[],i=(t=t.split("="))[1];return e.push(t[0]),(i=i&&d.trim(i))&&e.push(i),e.join("=")}):e}function r(t,e){this.$element=d(t),this.options=d.extend({},r.DEFAULTS,d.isPlainObject(e)&&e),this.init()}return r.prototype={constructor:r,init:function(){this.bind()},bind:function(){var t=this.options;this.$element.on(e,t.label,d.proxy(this.toggle,this)).on(i,t.group,d.proxy(this.toggle,this))},unbind:function(){this.$element.off(e,this.toggle).off(i,this.toggle)},toggle:function(t){var i,e,n,o,r,s,a=d(t.currentTarget),l=[];a.is("select")?(i=p(u.search),s=n=encodeURIComponent(a.attr("name")),o=a.val(),e=[n],o&&e.push(encodeURIComponent(o)),e=e.join("="),o&&l.push(e),a.children().each(function(){var t=d(this),e=[n],t=d.trim(t.prop("value"));if(t&&e.push(encodeURIComponent(t)),e=e.join("="),-1<d.inArray(e,i))return r=e,!1}),o=r?(l.push(r),c(l,!0)):c(l)):a.is("a")&&(t.preventDefault(),s=a.data().paramName,l=p(a.attr("href")),o=a.hasClass("is-active")?c(l,!0):c(l)),this.$element.closest(h).length?d(h).trigger("filterChanged.bhojpur.filter",[o,s]):u.search=o},destroy:function(){this.unbind(),this.$element.removeData(o)}},r.DEFAULTS={label:!1,group:!1},r.plugin=function(n){return this.each(function(){var t,e=d(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new r(this,n))}"string"==typeof n&&d.isFunction(t=i[n])&&t.apply(i)})},d(function(){var e='[data-toggle="bhojpur.filter"]',i={label:"a",group:"select"};d(document).on("disable.bhojpur.filter",function(t){r.plugin.call(d(e,t.target),"destroy")}).on(t,function(t){r.plugin.call(d(e,t.target),i)}).triggerHandler(t)}),r}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(s){var t=s(window),o="bhojpur.fixer",n="enable."+o,e="resize."+o,i="scroll."+o,a="bhojpur-table-fixed-header";function r(t,e){this.$element=s(t),this.options=s.extend({},r.DEFAULTS,s.isPlainObject(e)&&e),this.init()}return r.prototype={constructor:r,init:function(){var t=this.options,e=this.$element;this.isNeedBuild()||(this.$thead=e.find("> thead"),this.$tbody=e.find("> tbody"),this.$header=s(t.header),this.$subHeader=s(t.subHeader),this.$content=s(t.content),this.marginBottomPX=parseInt(this.$subHeader.css("marginBottom")),this.paddingHeight=t.paddingHeight,this.resize(),this.bind())},bind:function(){this.$content.on(i,this.toggle.bind(this)),t.on(e,this.resize.bind(this))},unbind:function(){this.$content.off(i,this.toggle).off(e,this.resize)},isNeedBuild:function(){var t=this.$element;return!!(1<s(".bhojpur-page__body .bhojpur-js-table").length||0<s(".bhojpur-global-search--container").length||t.hasClass("bhojpur-table--medialibrary")||t.is(":hidden")||t.find("tbody > tr:visible").length<=1||t.data("disable-fixer"))},build:function(){var e=[];this.$tbody.find("> tr:first").children().each(function(){var t=s(this).outerWidth();s(this).outerWidth(t),e.push(t)}),this.$thead.find(">tr").children().each(function(t){s(this).outerWidth(e[t])})},toggle:function(){var t,e,i,n,o,r;this.$content.length&&(t=this.$element,e=this.$thead,i=this.$content.scrollTop(),n=this.$subHeader.outerHeight()+this.paddingHeight+this.marginBottomPX,o=s(".bhojpur-page__header").outerHeight(),r=this.$content.offset().top+s(".bhojpur-page__header").height(),n-o<i?(e.css({top:r}),t.addClass(a)):t.removeClass(a))},resize:function(){this.build(),this.toggle()},destroy:function(){this.buildCheck()||(this.unbind(),this.$element.removeData(o))}},r.DEFAULTS={header:!1,content:!1},r.plugin=function(n){return this.each(function(){var t,e=s(this),i=e.data(o);i||e.data(o,i=new r(this,n)),"string"==typeof n&&s.isFunction(t=i[n])&&t.call(i)})},s(function(){var e=".bhojpur-js-table",i={header:".mdl-layout__header",subHeader:".bhojpur-page__header",content:".mdl-layout__content",paddingHeight:2};s(document).on("disable.bhojpur.fixer",function(t){r.plugin.call(s(e,t.target),"destroy")}).on(n,function(t){r.plugin.call(s(e,t.target),i)}).triggerHandler(n)}),r}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(s){var o="bhojpur.inlineEdit",t="enable."+o,e="click."+o,i="mouseenter."+o,n="mouseleave."+o,a=".bhojpur-field",l=".bhojpur-field__show",u=".bhojpur-inlineedit__edit",h=".bhojpur-inlineedit__buttons",d="bhojpur-inlineedit__field";function r(t,e){this.$element=s(t),this.options=s.extend({},r.DEFAULTS,s.isPlainObject(e)&&e),this.init()}return r.prototype={constructor:r,init:function(){var t=this.$element,e=t.data("button-save"),t=t.data("button-cancel");this.TEMPLATE_SAVE='<div class="bhojpur-inlineedit__buttons">\n                                        <button class="mdl-button mdl-button--colored mdl-js-button bhojpur-button--small bhojpur-inlineedit__cancel" type="button">'.concat(t,'</button>\n                                        <button class="mdl-button mdl-button--colored mdl-js-button bhojpur-button--small bhojpur-inlineedit__save" type="button">').concat(e,"</button>\n                                      </div>"),this.bind()},bind:function(){this.$element.on(i,l,this.showEditButton).on(n,l,this.hideEditButton).on(e,".bhojpur-inlineedit__cancel",this.hideEdit).on(e,".bhojpur-inlineedit__save",this.saveEdit).on(e,u,this.showEdit.bind(this))},unbind:function(){this.$element.off(i).off(n).off(e)},showEditButton:function(t){var e=s(r.TEMPLATE_EDIT);if(s(t.target).closest(a).find("input:disabled, textarea:disabled,select:disabled").length)return!1;e.appendTo(s(this))},hideEditButton:function(){s(".bhojpur-inlineedit__edit").remove()},showEdit:function(t){t=s(t.target).closest(u).hide().closest(a).addClass(d);s(this.TEMPLATE_SAVE).appendTo(t)},hideEdit:function(){s(this).closest(a).removeClass(d).find(h).remove()},saveEdit:function(){var n=s(this),o=n.closest(a),t=n.closest("form"),e=o.closest(".bhojpur-fieldset").find('input.bhojpur-hidden__primary_key[type="hidden"]'),i=o.find('input[name*="BhojpurResource"],textarea[name*="BhojpurResource"],select[name*="BhojpurResource"]'),r=i.length&&i.prop("name").match(/\.\w+/g),i=i.serialize();e.length&&(i="".concat(i,"&").concat(e.serialize())),r.length&&s.ajax(t.prop("action"),{method:t.prop("method"),data:i,dataType:"json",beforeSend:function(){n.prop("disabled",!0)},success:function(t){var t=function(t,e){var i,n=e[t[0].slice(1)];if(1<t.length)for(var o=1;o<t.length;o++)i=t[o].slice(1),n=(s.isArray(n)?n[0]:n)[i];return n}(r,t),e=o.removeClass(d).find(l),i=e.find(".bhojpur-field__show-inner");("string"==typeof t||t instanceof String)&&(t=t.escapeSymbol()),(i.length?i:e).html(t),o.find(h).remove(),n.prop("disabled",!1)},error:function(t){window.BHOJPUR.handleAjaxError(t),n.prop("disabled",!1)}})},destroy:function(){this.unbind(),this.$element.removeData(o)}},r.DEFAULTS={},r.TEMPLATE_EDIT='<button class="mdl-button mdl-js-button mdl-button--icon mdl-button--colored bhojpur-inlineedit__edit" type="button"><i class="material-icons">mode_edit</i></button>',r.plugin=function(n){return this.each(function(){var t,e=s(this),i=e.data(o);i||e.data(o,i=new r(this,n)),"string"==typeof n&&s.isFunction(t=i[n])&&t.call(i)})},s(function(){var e='[data-toggle="bhojpur.inlineEdit"]',i={};s(document).on("disable.bhojpur.inlineEdit",function(t){r.plugin.call(s(e,t.target),"destroy")}).on(t,function(t){r.plugin.call(s(e,t.target),i)}).triggerHandler(t)}),r}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(e){var i=window.componentHandler,n='[class*="mdl-js"],[class*="mdl-tooltip"]';function o(t){i&&(e(t).is(n)?i.upgradeElements(t):i.upgradeElements(e(n,t).toArray()))}function r(t){i&&(e(t).is(n)?i.downgradeElements(t):i.downgradeElements(e(n,t).toArray()))}e(function(){e(document).on("enable.bhojpur.material",function(t){o(t.target)}).on("disable.bhojpur.material",function(t){r(t.target)}).on("update.bhojpur.material",function(t){r(t.target),o(t.target)})})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(o){var n=o(document),r="bhojpur.modal",t="click."+r,e="keyup."+r,s="transitionend",a="bhojpur-modal-open",l="in",i="aria-hidden";function d(t,e){this.$element=o(t),this.options=o.extend({},d.DEFAULTS,o.isPlainObject(e)&&e),this.transitioning=!1,this.fadable=!1,this.init()}return d.prototype={constructor:d,init:function(){this.fadable=this.$element.hasClass("fade"),this.options.show?this.show():this.toggle()},bind:function(){this.$element.on(t,o.proxy(this.click,this)),this.options.keyboard&&n.on(e,o.proxy(this.keyup,this))},unbind:function(){this.$element.off(t,this.click),this.options.keyboard&&n.off(e,this.keyup)},click:function(t){var e=this.$element[0],i=t.target;if(i===e&&this.options.backdrop)this.hide();else for(;i!==e;){if("modal"===o(i).data("dismiss")){this.hide();break}i=i.parentNode}},keyup:function(t){27===t.which&&this.hide()},show:function(t){var e,i=this.$element;if(!this.transitioning&&!i.hasClass(l)&&(e=o.Event("show.bhojpur.modal"),i.trigger(e),!e.isDefaultPrevented())){if(n.find("body").addClass(a),i.addClass("shown").scrollTop(0).get(0).offsetHeight,this.transitioning=!0,t||!this.fadable)return i.addClass(l),void this.shown();i.one(s,o.proxy(this.shown,this)),i.addClass(l)}},shown:function(){this.transitioning=!1,this.bind(),this.$element.attr(i,!1).trigger("shown.bhojpur.modal").focus()},hide:function(t){var e,i=this.$element;if(!this.transitioning&&i.hasClass(l)&&(e=o.Event("hide.bhojpur.modal"),i.trigger(e),!e.isDefaultPrevented())){if(n.find("body").removeClass(a),this.transitioning=!0,t||!this.fadable)return i.removeClass(l),void this.hidden();i.one(s,o.proxy(this.hidden,this)),i.removeClass(l)}},hidden:function(){this.transitioning=!1,this.unbind(),this.$element.removeClass("shown").attr(i,!0).trigger("hidden.bhojpur.modal")},toggle:function(){this.$element.hasClass(l)?this.hide():this.show()},destroy:function(){this.$element.removeData(r)}},d.DEFAULTS={backdrop:!1,keyboard:!0,show:!0},o.fn.bhojpurModal=d.plugin=function(n){return this.each(function(){var t,e=o(this),i=e.data(r);if(!i){if(/destroy/.test(n))return;e.data(r,i=new d(this,n))}"string"==typeof n&&o.isFunction(t=i[n])&&t.apply(i)})},o(function(){var e=".bhojpur-modal";o(document).on(t,'[data-toggle="bhojpur.modal"]',function(){var t=o(this),e=t.data(),t=o(e.target||t.attr("href"));d.plugin.call(t,t.data(r)?"toggle":e)}).on("disable.bhojpur.modal",function(t){d.plugin.call(o(e,t.target),"destroy")}).on("enable.bhojpur.modal",function(t){d.plugin.call(o(e,t.target))})}),d}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var o="bhojpur.tabbar.radio",t="enable."+o,e="click."+o,s="[data-tab-target]",a="is-active";function l(t,e){this.$element=r(t),this.options=r.extend({},l.DEFAULTS,r.isPlainObject(e)&&e),this.init()}return l.prototype={constructor:l,init:function(){this.bind()},bind:function(){this.$element.on(e,s,this.switchTab.bind(this))},unbind:function(){this.$element.off(e,s,this.switchTab)},switchTab:function(t){var t=r(t.target),e=this.$element,i=e.find(s),n=e.find("[data-tab-source]"),o=t.data().tabTarget;t.hasClass(a)||(i.removeClass(a),t.addClass(a),n.hide().filter('[data-tab-source="'+o+'"]').show(),e.trigger("switched.bhojpur.tabbar.radio",[e,o]))},destroy:function(){this.unbind()}},l.DEFAULTS={},l.plugin=function(n){return this.each(function(){var t,e=r(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new l(this,n))}"string"==typeof n&&r.isFunction(t=i[n])&&t.apply(i)})},r(function(){var e='[data-toggle="bhojpur.tab.radio"]';r(document).on("disable.bhojpur.tabbar.radio",function(t){l.plugin.call(r(e,t.target),"destroy")}).on(t,function(t){l.plugin.call(r(e,t.target))}).triggerHandler(t)}),l}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(u){var r="bhojpur.redactor",t="enable."+r,l="click."+r,e="addCrop."+r,i="removeCrop."+r,s="scroll."+r,n=".bhojpur-cropper__toggle--redactor";function h(t,e){this.$element=u(t),this.options=u.extend(!0,{},h.DEFAULTS,u.isPlainObject(e)&&e),this.init()}return h.prototype={constructor:h,init:function(){var i,t=this.options,e=this.$element,n=e.closest(t.parent);n.length||(n=e.parent()),this.$parent=n,this.$button=u(h.BUTTON),this.$modal=u((i=h.MODAL,e=t.text,"string"==typeof i&&"object"===_typeof(e)&&u.each(e,function(t,e){i=i.replace("$["+String(t).toLowerCase()+"]",e)}),i)).appendTo("body"),this.bind()},bind:function(){this.$element.on(e,u.proxy(this.addButton,this)).on(i,u.proxy(this.removeButton,this))},unbind:function(){this.$element.off(e).off(i).off(s)},addButton:function(t,e){var i=u(e);this.$button.css("left",u(e).width()/2).prependTo(i.parent()).find(n).one(l,u.proxy(this.crop,this,i))},removeButton:function(){this.$button.find(n).off(l),this.$button.detach()},crop:function(n){var o,r=this.options,s=n.attr("src"),t=s,a=this.$modal;u.isFunction(r.replace)&&(t=r.replace(t)),o=u("<img src='".concat(t,"'>")),a.one("shown.bhojpur.modal",function(){var t,e;o.cropper({data:(t=n.attr("data-crop-options"),e=t&&t.split(","),t=null,t=e&&4===e.length?{x:Number(e[0]),y:Number(e[1]),width:Number(e[2]),height:Number(e[3])}:t),background:!1,movable:!1,zoomable:!1,scalable:!1,rotatable:!1,checkImageOrigin:!1,ready:function(){a.find(".bhojpur-cropper__save").one(l,function(){var i=o.cropper("getData",!0);u.ajax(r.remote,{type:"POST",contentType:"application/json",data:JSON.stringify({Url:s,CropOptions:{original:function(t){var e,i,n={};if(u.isPlainObject(t))for(e in t)t.hasOwn(e)&&(n[i="string"==typeof(i=e)?i.charAt(0).toUpperCase()+i.substr(1):i]=t[e]);return n}(i)},Crop:!0}),dataType:"json",success:function(t){var e;u.isPlainObject(t)&&t.url&&(n.attr("src",t.url).attr("data-crop-options",(t=i,e=[],u.isPlainObject(t)&&u.each(t,function(){e.push(arguments[1])}),e.join())).removeAttr("style").removeAttr("rel"),u.isFunction(r.complete)&&r.complete(),a.bhojpurModal("hide"))}})})}})}).one("hidden.bhojpur.modal",function(){o.cropper("destroy").remove()}).bhojpurModal("show").find(".bhojpur-cropper__wrapper").append(o)},destroy:function(){this.unbind(),this.$modal.bhojpurModal("hide").remove(),this.$element.removeData(r)}},h.DEFAULTS={remote:!1,parent:!1,toggle:!1,replace:null,complete:null,text:{title:"Crop the image",ok:"OK",cancel:"Cancel"}},h.BUTTON='<div class="bhojpur-redactor__image--buttons">\n              <span class="bhojpur-redactor__image--edit" contenteditable="false">Edit</span>\n              <span class="bhojpur-cropper__toggle--redactor" contenteditable="false">Crop</span>\n          </div>',h.MODAL='<div class="bhojpur-modal fade" tabindex="-1" role="dialog" aria-hidden="true">\n              <div class="mdl-card mdl-shadow--2dp" role="document">\n                <div class="mdl-card__title">\n                  <h2 class="mdl-card__title-text">$[title]</h2>\n                </div>\n                <div class="mdl-card__supporting-text">\n                  <div class="bhojpur-cropper__wrapper"></div>\n                </div>\n                <div class="mdl-card__actions mdl-card--border">\n                  <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect bhojpur-cropper__save">$[ok]</a>\n                  <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" data-dismiss="modal">$[cancel]</a>\n                </div>\n                <div class="mdl-card__menu">\n                  <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect" data-dismiss="modal" aria-label="close">\n                    <i class="material-icons">close</i>\n                    </button>\n                </div>\n              </div>\n          </div>',h.plugin=function(o){return this.each(function(){var t,i=u(this),n=i.data(r);if(n)/destroy/.test(o)&&window.$R(this,"destroy");else{if(!window.$R)return;if(/destroy/.test(o))return;i.data(r,n={});var e={imageUpload:i.data("uploadUrl"),fileUpload:i.data("uploadUrl"),buttons:["html","format","bold","italic","deleted","lists","image","file","link"],linkNewTab:!0,linkTitle:!1,autoparsePaste:!1,autoparseLinks:!1,multipleUpload:!1,toolbarFixedTarget:!i.closest(".bhojpur-slideout").length&&!i.closest(".bhojpur-bottomsheets").length&&u("main.mdl-layout__content").length?"main.mdl-layout__content":document,callbacks:{started:function(){var t,a=u(this.container.$container.nodes[0]),l=u(this.toolbar.$toolbar.nodes[0]),e=u(".bhojpur-slideout").is(":visible"),d=64;e?d=0!=i.closest(".bhojpur-bottomsheets").length?(t=i.closest(".bhojpur-page__body"),i.closest(".bhojpur-page__body").offset().top):(t=".bhojpur-slideout__body",u(".bhojpur-slideout__header").height()):d+=u(t=".bhojpur-layout main.bhojpur-page").find(".bhojpur-page__header").height(),u(t).on(s,function(){var t,e,i,n,o,r,s;t=l,i=d,n=(e=a).offset().top,o=e.outerHeight(),r={position:"relative",top:"auto",width:"auto"},s={position:"fixed",top:i,width:e.width(),boxShadow:"none"},n<i&&Math.abs(n)<Math.abs(o-i)?(t.css(s),e.css("padding-top",t.outerHeight())):(t.css(r),e.css("padding-top",0))}),i.data("cropUrl")&&i.data(r,n=new h(i,{remote:i.data("cropUrl"),text:i.data("text"),parent:".bhojpur-field",toggle:".bhojpur-cropper__toggle--redactor",replace:function(t){return t.replace(/\.\w+$/,function(t){return".original"+t})},complete:u.proxy(function(){this.code.sync()},this)}))},imageUpload:function(t,e){t=u(t);e.filelink&&t.prop("src",e.filelink)},insertedLink:function(t){var t=u(t),e=this.link.description;t.prop("title",e||t.text()),this.link.description="",this.link.linkUrlText="",this.link.insertedTriggered=!0},fileUpload:function(t,e){u(t).prop("href",e.filelink).html(e.filename)}}};u.extend(e,i.data("redactorSettings")),window.$R.prototype.constructor.services.editor.prototype.focus=function(){return!1},window.$R(this,e)}"string"==typeof o&&u.isFunction(t=n[o])&&t.apply(n)})},u(function(){var e='textarea[data-toggle="bhojpur.redactor"]';u(document).on("disable.bhojpur.redactor",function(t){h.plugin.call(u(e,t.target),"destroy")}).on(t,function(t){h.plugin.call(u(e,t.target))}).triggerHandler(t)}),h}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(u){var r=window._,d=window.BHOJPUR,o="bhojpur.replicator",t="enable."+o,e="submit."+o,s="click."+o,i="slideoutBeforeSend.bhojpur.slideout.replicator",n="selectcoreBeforeSend.bhojpur.selectcore.replicator bottomsheetBeforeSend.bhojpur.bottomsheets.replicator",a=".bhojpur-fieldset-container";function l(t,e){this.$element=u(t),this.options=u.extend({},l.DEFAULTS,u.isPlainObject(e)&&e),this.index=0,this.init()}return l.prototype={constructor:l,init:function(){var i,n=this,t=this.$element,e=t.find("> .bhojpur-field__block > .bhojpur-fieldset--new");this.singlePage=!(t.closest(".bhojpur-slideout").length&&t.closest(".bhojpur-bottomsheets").length),this.maxitems=t.data("maxItem"),this.isSortable=t.hasClass("bhojpur-fieldset-sortable"),e.length&&!t.closest(".bhojpur-fieldset--new").length&&(e.trigger("disable"),e.find("select[data-toggle]").removeAttr("data-select2-id"),this.isMultipleTemplate=t.data("isMultiple"),this.isMultipleTemplate?(this.fieldsetName=[],this.template={},this.index=[],e.each(function(t,e){(i=u(e).data("fieldsetName"))&&(n.template[i]=u(e).prop("outerHTML"),n.fieldsetName.push(i))}),this.parseMultiple()):this.parse(e.prop("outerHTML")),e.hide(),this.bind(),this.resetButton(),this.resetPositionButton())},resetPositionButton:function(){var t=this.$element.find("> .bhojpur-sortable__button");this.isSortable&&(1<this.getCurrentItems()?t.show():t.hide())},getCurrentItems:function(){return this.$element.find("> .bhojpur-field__block > .bhojpur-fieldset").not(".bhojpur-fieldset--new,.is-deleted").length},toggleButton:function(t){var e=this.$element.find("> .bhojpur-field__block > .bhojpur-fieldset__add");t?e.hide():e.show()},resetButton:function(){this.maxitems<=this.getCurrentItems()?this.toggleButton(!0):this.toggleButton()},parse:function(t){t&&(t=this.initTemplate(t),this.template=t.template,this.index=t.index)},parseMultiple:function(){for(var t,e,i=this.fieldsetName,n=0,o=i.length;n<o;n++)e=i[n],t=this.initTemplate(this.template[e]),this.template[e]=t.template,this.index.push(t.index);this.multipleIndex=r.max(this.index)},initTemplate:function(t){var u,h=this.$element.parents(a).length;return{template:t=t.replace(/(\w+)="(\S*\[\d+\]\S*)"/g,function(t,l,d){return d=d.replace(/^(\S*)\[(\d+)\]([^[\]]*)$/,function(t,e,i){if(t===d){if("name"!==l||u||(u=i),h){for(var n="",o=t.split(/\[\d+\]/),r=t.match(/\[\d+\]/g),s=0;s<o.length;s++){var a="";s===h?a="[{{index}}]":s<r.length&&(a=r[s]),n+=o[s]+a}return n}return t.replace(/\[\d+\]/,"[{{index}}]")}}),l+'="'+d+'"'}),index:parseFloat(u)+5}},bind:function(){var t=this.options;this.$element.on(s,t.addClass,u.proxy(this.add,this)).on(s,t.delClass,u.proxy(this.del,this)),this.singlePage&&u(document).on(e,".mdl-layout__container form",this.clearFieldData),u(document).on(i,".bhojpur-slideout",this.clearFieldDataInSlideout).on(n,this.clearFieldDataInBottomsheet)},unbind:function(){this.$element.off(s),this.singlePage&&u(document).off(e,".mdl-layout__container form",this.clearFieldData),u(document).off(i,".bhojpur-slideout",this.clearFieldDataInSlideout).off(n,this.clearFieldDataInBottomsheet)},clearFieldData:function(){u(".bhojpur-fieldset--new").remove()},clearFieldDataInSlideout:function(){u(".bhojpur-slideout .bhojpur-fieldset--new").remove()},clearFieldDataInBottomsheet:function(){u(".bhojpur-bottomsheets .bhojpur-fieldset--new").remove()},add:function(t,e,i){var n=this.options,o=u(t.target).closest(n.addClass);if(this.maxitems<=this.getCurrentItems())return!1;if(this.isMultipleTemplate){var r,s,a=o.data("template"),l=o.closest(this.$element).children(n.childrenClass),n=o.closest(n.childrenClass).children("fieldset"),a=this.template[a],d=u(a.replace(/\{\{index\}\}/g,this.multipleIndex));for(r in o.data())r.match(/^sync/)&&(s=r.replace(/^sync/,""),d.find("input[name*='."+s+"']").val(o.data(r)));n.length?n.last().after(d.show()):l.prepend(d.show()),d.data("itemIndex",this.multipleIndex).removeClass("bhojpur-fieldset--new"),this.multipleIndex++}else i?e&&e.length&&(this.addMultiple(e),u(document).trigger("addedMultipleDone.bhojpur.replicator")):(d=this.addSingle(),o.before(d.show()),this.index++);i||(d.trigger("enable"),u(document).trigger("added.bhojpur.replicator",[d]),t.stopPropagation()),this.resetPositionButton(),this.resetButton()},addMultiple:function(t){for(var e,i=0,n=t.length;i<n;i++)e=this.addSingle(),this.index++,u(document).trigger("addedMultiple.bhojpur.replicator",[e,t[i]])},addSingle:function(){var t,e=this.$element;if(this.template)return t=u(this.template.replace(/\{\{index\}\}/g,this.index)),this.isSortable&&(e=e.find("> .bhojpur-field__block > .bhojpur-sortable__item").not(".bhojpur-fieldset--new").length,t.attr("order-index",e).attr("order-item","item_".concat(e)).css("order",e)),t.data("itemIndex",this.index).removeClass("bhojpur-fieldset--new"),t},del:function(t){var e,i=this.options,n=u(t.target).closest(i.itemClass),o=this,t={confirm:u(t.target).closest(i.delClass).data("confirm")||"Are you sure?"};d.bhojpurConfirm(t,function(t){t&&(n.addClass("is-deleted").children(":visible").addClass("hidden").hide(),(e=u(i.alertTemplate.replace("{{name}}",o.parseName(n)))).find(i.undoClass).one(s,function(){if(o.maxitems<=o.getCurrentItems())return window.BHOJPUR.bhojpurConfirm(o.$element.data("maxItemHint")),!1;n.find("> .bhojpur-fieldset__alert").remove(),n.removeClass("is-deleted").children(".hidden").removeClass("hidden").show(),o.resetButton(),o.resetPositionButton()}.bind(this)),o.resetButton(),o.resetPositionButton(),n.append(e))})},parseName:function(t){t=t.find("input[name]").attr("name")||t.find("textarea[name]").attr("name");if(t)return t.replace(/[^[\]]+$/,"")},destroy:function(){this.unbind(),this.$element.removeData(o)}},l.DEFAULTS={itemClass:".bhojpur-fieldset",newClass:".bhojpur-fieldset--new",addClass:".bhojpur-fieldset__add",delClass:".bhojpur-fieldset__delete",childrenClass:".bhojpur-field__block",undoClass:".bhojpur-fieldset__undo",alertTemplate:'<div class="bhojpur-fieldset__alert"><input type="hidden" name="{{name}}._destroy" value="1"><button class="mdl-button mdl-button--accent mdl-js-button mdl-js-ripple-effect bhojpur-fieldset__undo" type="button">Undo delete</button></div>'},l.plugin=function(n){return this.each(function(){var t,e=u(this),i=e.data(o);i||e.data(o,i=new l(this,n)),"string"==typeof n&&u.isFunction(t=i[n])&&t.call(i)})},u(function(){var e=a,i={};u(document).on("disable.bhojpur.replicator",function(t){l.plugin.call(u(e,t.target),"destroy")}).on(t,function(t){l.plugin.call(u(e,t.target),i)}).triggerHandler(t)}),l}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(s){var a=window.location,o=window.componentHandler,l=window.history,r="bhojpur.globalSearch",t="enable."+r,e="click."+r,d=".bhojpur-global-search--resource",u=".bhojpur-global-search--results",h="is-active";function c(t,e){this.$element=s(t),this.options=s.extend({},c.DEFAULTS,s.isPlainObject(e)&&e),this.init()}return c.prototype={constructor:c,init:function(){this.bind(),this.initTab()},bind:function(){this.$element.on(e,s.proxy(this.click,this))},unbind:function(){this.$element.off(e,this.check)},initTab:function(){var t=a.search;/resource_name/.test(t)&&(t=t.match(/resource_name=\w+/g).toString().split("=")[1],s(d).removeClass(h),s('[data-resource="'+t+'"]').addClass(h))},click:function(t){var e,i,n,o,t=s(t.target),r=t.data();t.is(d)&&(e=a.href.replace(/#/g,""),r=r.resource,i=/resource_name/.test(e),n="resource_name="+r,o=/keyword/.test(e)?"&":"?keyword=&",r=r?i?e.replace(/resource_name=\w+/g,n):e+o+n:e.replace(/&resource_name=\w+/g,""),l.pushState?this.fetchSearch(r,t):a.href=r)},fetchSearch:function(e,i){var n=document.title;s.ajax(e,{method:"GET",dataType:"html",beforeSend:function(){s(".mdl-spinner").remove(),s(u).prepend('<div class="mdl-spinner mdl-js-spinner is-active"></div>').find(".bhojpur-section").hide(),o.upgradeElement(document.querySelector(".mdl-spinner"))},success:function(t){t=s(t).find(u).html();s(d).removeClass(h),i.addClass(h),l.pushState({Page:e,Title:n},n,e),s(".mdl-spinner").remove(),s(u).removeClass("loading").html(t),o.upgradeElements(document.querySelectorAll(".bhojpur-table"))},error:function(t,e,i){s(u).find(".bhojpur-section").show(),s(".mdl-spinner").remove(),window.alert([e,i].join(": "))}})},destroy:function(){this.unbind(),this.$element.removeData(r)}},c.DEFAULTS={},c.plugin=function(n){return this.each(function(){var t,e=s(this),i=e.data(r);i||e.data(r,i=new c(this,n)),"string"==typeof n&&s.isFunction(t=i[n])&&t.call(i)})},s(function(){var e='[data-toggle="bhojpur.global.search"]',i={};s(document).on("disable.bhojpur.globalSearch",function(t){c.plugin.call(s(e,t.target),"destroy")}).on(t,function(t){c.plugin.call(s(e,t.target),i)}).triggerHandler(t)}),c}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(l){var d=window.FormData,u=window.BHOJPUR,o="bhojpur.selectcore",s="afterSelected."+o,t="click."+o,e="submit."+o,i="table.bhojpur-js-table tr";function r(t,e){this.$element=l(t),this.options=l.extend({},r.DEFAULTS,l.isPlainObject(e)&&e),this.init()}return r.prototype={constructor:r,init:function(){this.bind()},bind:function(){this.$element.on(t,i,this.processingData.bind(this)).on(e,"form",this.submit.bind(this))},unbind:function(){this.$element.off(t,i).off(e,"form")},processingData:function(e){var t=l(e.target).closest("tr"),i=t.closest(".bhojpur-bottomsheets"),n={},o=this.options,r=o.onSelect,o=o.loading;return(n=l.extend({},n,t.data())).$clickElement=t,t=n.mediaLibraryUrl||n.url,o&&l.isFunction(o)&&o(i),t?l.getJSON(t,function(t){t.MediaOption&&(t.MediaOption=JSON.parse(t.MediaOption)),n=l.extend({},t,n),r&&l.isFunction(r)&&(r(n,e),l(document).trigger(s))}).always(function(){i.find(".bhojpur-media-loading").remove()}):r&&l.isFunction(r)&&(r(n,e),l(document).trigger(s)),!1},submit:function(e){var i,t=e.target,n=l(t),o=this,r=n.find(":submit"),s=l(u.$formLoading),a=this.options.onSubmit;l(document).trigger("selectcoreBeforeSend.bhojpur.selectcore"),n.find(".bhojpur-fieldset--new").remove(),d&&(e.preventDefault(),l.ajax(n.prop("action"),{method:n.prop("method"),data:new d(t),dataType:"json",processData:!1,contentType:!1,beforeSend:function(){l(".bhojpur-submit-loading").remove(),s.appendTo(r.prop("disabled",!0).closest(".bhojpur-form__actions")).trigger("enable.bhojpur.material")},success:function(t){t.MediaOption&&(t.MediaOption=JSON.parse(t.MediaOption)),(i=t).primaryKey=i.ID,l(".bhojpur-error").remove(),a&&l.isFunction(a)?(a(i,e),l(document).trigger("afterSubmitted.bhojpur.selectcore")):o.refresh()},error:function(t){u.handleAjaxError(t)},complete:function(){r.prop("disabled",!1)}}))},refresh:function(){setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind()}},l.fn.bhojpurSelectCore=r.plugin=function(n){return this.each(function(){var t,e=l(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new r(this,n))}"string"==typeof n&&l.isFunction(t=i[n])&&t.apply(i)})},r}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(s){var c=s("body"),t=s(document),a=window.Mustache,o="bhojpur.selectone",i="click."+o,p="enable."+o,e="reload.bhojpur.bottomsheets",n=".bhojpur-selected-many__remove",f=".bhojpur-selected-many__undo",l="bhojpur-selected-many__deleted",r=".bhojpur-field__selectmany",d="is_selected",u="bhojpur-bottomsheets__select-many";function h(t,e){this.$element=s(t),this.options=s.extend({},h.DEFAULTS,s.isPlainObject(e)&&e),this.init()}return h.prototype={constructor:h,init:function(){this.bind()},bind:function(){t.on(e,".".concat(u),this.reloadData.bind(this)),this.$element.on(i,n,this.clearSelect.bind(this)).on(i,'[data-select-modal="many"]',this.openBottomSheets.bind(this)).on(i,f,this.undoDelete.bind(this))},unbind:function(){t.off(i,'[data-select-modal="many"]').off(e,".".concat(u)),this.$element.off(i,n).off(i,f)},clearSelect:function(t){var t=s(t.target),e=t.closest(r);return t.closest("[data-primary-key]").addClass(l),this.updateSelectInputData(e),!1},undoDelete:function(t){var t=s(t.target),e=t.closest(r);return t.closest("[data-primary-key]").removeClass(l),this.updateSelectInputData(e),!1},openBottomSheets:function(t){var t=s(t.target),e=t.data();this.BottomSheets=c.data("bhojpur.bottomsheets"),this.bottomsheetsData=e,this.$selector=e.selectId?s(e.selectId):t.closest(r).find("select"),this.$selectFeild=this.$selector.closest(r).find(".bhojpur-field__selected-many"),this.SELECT_MANY_SELECTED_ICON=s('[name="select-many-selected-icon"]').html(),this.SELECT_MANY_UNSELECTED_ICON=s('[name="select-many-unselected-icon"]').html(),this.SELECT_MANY_HINT=s('[name="select-many-hint"]').html(),this.SELECT_MANY_TEMPLATE=s('[name="select-many-template"]').html(),e.url=e.selectListingUrl,e.selectDefaultCreating&&(e.url=e.selectCreatingUrl),this.BottomSheets.open(e,this.handleSelectMany.bind(this))},reloadData:function(){this.initItems()},renderSelectMany:function(t){return a.render(this.SELECT_MANY_TEMPLATE,t)},renderHint:function(t){return a.render(this.SELECT_MANY_HINT,t)},initItems:function(){var i,t=this.$bottomsheets.find("tbody tr"),n=this.SELECT_MANY_SELECTED_ICON,o=this.SELECT_MANY_UNSELECTED_ICON,r=[];this.$selectFeild.find("[data-primary-key]").not("."+l).each(function(){r.push(s(this).data().primaryKey)}),t.each(function(){var t=s(this),e=t.find("td:first");i=t.data().primaryKey,"-1"!=r.indexOf(i)?(t.addClass(d),e.append(n)):e.append(o)}),this.updateHint(this.getSelectedItemData())},getSelectedItemData:function(){return{selectedNum:this.$selectFeild.find("[data-primary-key]").not("."+l).length}},updateHint:function(t){s.extend(t,this.bottomsheetsData),t=this.renderHint(t),this.$bottomsheets.find(".bhojpur-selectmany__hint").remove(),this.$bottomsheets.find(".bhojpur-page__body").before(t)},updateSelectInputData:function(t){var e,i,n=(t||this.$selectFeild).find("[data-primary-key]").not("."+l),o=t?t.find(".bhojpur-field__selectmany-input"):this.$selector,r=o.find("option");r.prop("selected",!1),n.each(function(){i=s(this).data().primaryKey,(e=r.filter('[value="'+i+'"]')).length||(i={primaryKey:i,displayName:""},e=s(a.render(h.SELECT_MANY_OPTION_TEMPLATE,i)),o.append(e)),e.prop("selected",!0)})},changeIcon:function(t,e){t.find(".bhojpur-select__select-icon").remove(),t.find("td:first").prepend(e)},removeItem:function(t){var e=t.primaryKey;this.$selectFeild.find('[data-primary-key="'+e+'"]').find(n).click(),this.changeIcon(t.$clickElement,this.SELECT_MANY_UNSELECTED_ICON)},addItem:function(t,e){var i=this.renderSelectMany(t),n=this.$selectFeild.find('[data-primary-key="'+t.primaryKey+'"]');return n.length?n.hasClass(l)?(n.removeClass(l),this.updateSelectInputData(),void this.changeIcon(t.$clickElement,this.SELECT_MANY_SELECTED_ICON)):void 0:(this.$selectFeild.append(i),e?((n=s(a.render(h.SELECT_MANY_OPTION_TEMPLATE,t))).appendTo(this.$selector),n.prop("selected",!0),this.$bottomsheets.remove(),void(s(".bhojpur-bottomsheets").is(":visible")||s("body").removeClass("bhojpur-bottomsheets-open"))):void this.changeIcon(t.$clickElement,this.SELECT_MANY_SELECTED_ICON))},handleSelectMany:function(t){var e={onSelect:this.onSelectResults.bind(this),onSubmit:this.onSubmitResults.bind(this)};t.bhojpurSelectCore(e).addClass(u),t.on(i,".bhojpur-selectmany__selectall",this.handleSelectAll.bind(this)),this.$bottomsheets=t,this.initItems()},handleSelectAll:function(){var t=this.$bottomsheets.find(".bhojpur-table tbody tr"),e=t.not(".is_selected");(e.length?e:t).click()},onSelectResults:function(t){this.handleResults(t)},onSubmitResults:function(t){this.handleResults(t,!0)},handleResults:function(t,e){t.displayName=t.Text||t.Name||t.Title||t.Code||t[Object.keys(t)[0]],t.displayName=t.displayName.escapeSymbol(),e?this.addItem(t,!0):((e=t.$clickElement).toggleClass(d),e.hasClass(d)?this.addItem(t):this.removeItem(t),this.updateHint(this.getSelectedItemData()),this.updateSelectInputData())},destroy:function(){this.unbind(),this.$element.removeData(o)}},h.SELECT_MANY_OPTION_TEMPLATE='<option value="[[ primaryKey ]]" >[[ displayName ]]</option>',h.plugin=function(n){return this.each(function(){var t,e=s(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new h(this,n))}"string"==typeof n&&s.isFunction(t=i[n])&&t.apply(i)})},s(function(){var e='[data-toggle="bhojpur.selectmany"]';s(document).on("disable.bhojpur.selectone",function(t){h.plugin.call(s(e,t.target),"destroy")}).on(p,function(t){h.plugin.call(s(e,t.target))}).triggerHandler(p)}),h}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var u=r("body"),t=r(document),s=window.Mustache,o="bhojpur.selectone",e="click."+o,h="enable."+o,c="reload.bhojpur.bottomsheets",p=".bhojpur-selected__remove",f=".bhojpur-selected__change",a=".bhojpur-field__selected",m=".bhojpur-field__selectone-input",l=".bhojpur-field__selectone-trigger",i=".bhojpur-field__selectone",n="bhojpur-bottomsheets__select-one";function d(t,e){this.$element=r(t),this.options=r.extend({},d.DEFAULTS,r.isPlainObject(e)&&e),this.init()}return d.prototype={constructor:d,init:function(){this.bind()},bind:function(){t.on(c,".".concat(n),this.reloadData.bind(this)),this.$element.on(e,p,this.clearSelect.bind(this)).on(e,"[data-selectone-url]",this.openBottomSheets.bind(this)).on(e,f,this.changeSelect)},unbind:function(){t.off(e,"[data-selectone-url]").off(c,".".concat(n)),this.$element.off(e,p).off(e,f)},clearSelect:function(t){t=r(t.target).closest(i);return t.find(a).remove(),t.find(m).html(""),t.find(m)[0].value="",t.find(l).show(),t.trigger("bhojpur.selectone.unselected"),!1},changeSelect:function(){r(this).closest(i).find(l).trigger("click")},openBottomSheets:function(t){var t=r(t.target),e=t.data();this.BottomSheets=u.data("bhojpur.bottomsheets"),this.$parent=t.closest(i),e.url=e.selectoneUrl,this.SELECT_ONE_SELECTED_ICON=r('[name="select-one-selected-icon"]').html(),this.BottomSheets.open(e,this.handleSelectOne.bind(this))},initItem:function(){var t,e=this.$parent.find(a);e.length&&(t=e.data().primaryKey)&&this.$bottomsheets.find('tr[data-primary-key="'+t+'"]').addClass("is_selected").find("td:first").append(this.SELECT_ONE_SELECTED_ICON)},reloadData:function(){this.initItem()},renderSelectOne:function(t){return s.render(r('[name="select-one-selected-template"]').html(),t)},handleSelectOne:function(t){var e={onSelect:this.onSelectResults.bind(this),onSubmit:this.onSubmitResults.bind(this)};t.bhojpurSelectCore(e).addClass(n),this.$bottomsheets=t,this.initItem()},onSelectResults:function(t){this.handleResults(t)},onSubmitResults:function(t){this.handleResults(t,!0)},handleResults:function(t){var e,i=this.$parent,n=i.find("select"),o=i.find(a);t.displayName=t.Text||t.Name||t.Title||t.Code||t[Object.keys(t)[0]],t.selectoneValue=t.primaryKey||t.ID,t.displayName=t.displayName.escapeSymbol(),n.length&&(e=this.renderSelectOne(t),o.length&&o.remove(),i.prepend(e),i.find(l).hide(),n.html(s.render(d.SELECT_ONE_OPTION_TEMPLATE,t)),n[0].value=t.primaryKey||t.ID,i.trigger("bhojpur.selectone.selected",[t]),this.$bottomsheets.bhojpurSelectCore("destroy").remove(),r(".bhojpur-bottomsheets").is(":visible")||r("body").removeClass("bhojpur-bottomsheets-open"))},destroy:function(){this.unbind(),this.$element.removeData(o)}},d.SELECT_ONE_OPTION_TEMPLATE='<option value="[[ selectoneValue ]]" selected>[[ displayName ]]</option>',d.plugin=function(n){return this.each(function(){var t,e=r(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;e.data(o,i=new d(this,n))}"string"==typeof n&&r.isFunction(t=i[n])&&t.apply(i)})},r(function(){var e='[data-toggle="bhojpur.selectone"]';r(document).on("disable.bhojpur.selectone",function(t){d.plugin.call(r(e,t.target),"destroy")}).on(h,function(t){d.plugin.call(r(e,t.target))}).triggerHandler(h)}),d}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(l){var t=l(document),r="bhojpur.selector",i="enable."+r,e="click."+r,d="selected",u="disabled",s="clearable",a="."+d,h=".bhojpur-selector-toggle",f=".bhojpur-selector-label",c=".bhojpur-selector-menu",m=".bhojpur-bottomsheets";function p(t,e){this.options=e,this.$element=l(t),this.init()}return p.prototype={constructor:p,init:function(){var t=this.$element;this.placeholder=t.attr("placeholder")||t.attr("name")||"Select",this.build()},build:function(){var t=this.$element,e=l(p.TEMPLATE),i=this.options.aligned+"-aligned",s={},n=t.data(),o=n.hover,a=t.attr("name");this.isBottom="bottom"==n.position,o&&e.addClass("hover"),e.addClass(i).find(c).html(function(){var r=[];return t.children().each(function(){var t=l(this),e=t.attr("selected"),i=t.attr("disabled"),n=t.attr("value"),t=t.text(),o=[];e&&(o.push(d),s.value=n,s.label=t,s.paramName=a),i&&o.push(u),r.push("<li"+(o.length?' class="'+o.join(" ")+'"':"")+' data-value="'+n+'" data-label="'+t+'" data-param-name="'+a+'">'+t+"</li>")}),r.join("")}),this.$selector=e,t.hide().after(e),e.find(h).data("paramName",a),this.pick(s,!0),this.bind()},unbuild:function(){this.unbind(),this.$selector.remove(),this.$element.show()},bind:function(){this.$selector.on(e,l.proxy(this.click,this)),t.on(e,l.proxy(this.close,this))},unbind:function(){this.$selector.off(e,this.click)},click:function(t){var e=l(t.target);t.stopPropagation(),e.is(".bhojpur-selector-clear")?this.clear():e.is("li")?(e.hasClass(d)||e.hasClass(u)||this.pick(e.data()),this.close()):e.closest(h).length&&this.open()},pick:function(t,e){var i=this.$selector,n=!!t.value,o=this.$element;i.find(h).toggleClass("active",n).toggleClass(s,n&&this.options.clearable).find(f).text(t.label||this.placeholder),e||(i.find(c).children('[data-value="'+t.value+'"]').addClass(d).siblings(a).removeClass(d),o.val(t.value),o.closest(m).length&&!o.closest('[data-toggle="bhojpur.filter"]').length?l(m).trigger("selectorChanged.bhojpur.selector",[t.value,t.paramName]):o.trigger("change"))},clear:function(){var t=this.$element;this.$selector.find(h).removeClass("active").removeClass(s).find(f).text(this.placeholder).end().end().find(c).children(a).removeClass(d),t.val("").trigger("change")},open:function(){t.triggerHandler(e),l(".bhojpur-filter__dropdown").hide(),this.$selector.addClass("open"),this.isBottom&&this.$selector.addClass("bottom")},close:function(){this.$selector.removeClass("open"),this.isBottom&&this.$selector.removeClass("bottom")},destroy:function(){this.unbuild(),this.$element.removeData(r)}},p.DEFAULTS={aligned:"left",clearable:!1},p.TEMPLATE='<div class="bhojpur-selector"><a class="bhojpur-selector-toggle"><span class="bhojpur-selector-label"></span><i class="material-icons bhojpur-selector-arrow">arrow_drop_down</i><i class="material-icons bhojpur-selector-clear">clear</i></a><ul class="bhojpur-selector-menu"></ul></div>',p.plugin=function(o){return this.each(function(){var t,e,i=l(this),n=i.data(r);if(!n){if(/destroy/.test(o))return;t=l.extend({},p.DEFAULTS,i.data(),"object"===_typeof(o)&&o),i.data(r,n=new p(this,t))}"string"==typeof o&&l.isFunction(e=n[o])&&e.apply(n)})},l(function(){var e='[data-toggle="bhojpur.selector"]';l(document).on("disable.bhojpur.selector",function(t){p.plugin.call(l(e,t.target),"destroy")}).on(i,function(t){p.plugin.call(l(e,t.target))}).triggerHandler(i)}),p}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(p){var e=p(document),d=window.FormData,f=window.BHOJPUR_Translations,o=window._,l=window.BHOJPUR,r="bhojpur.slideout",n="keyup."+r,t="click."+r,a="submit."+r,y="shown."+r,m="hidden."+r,u="transitionend",h="bhojpur-slideout-open",c="bhojpur-slideout-mini",g="is-shown",v="is-slided",b=".bhojpur-body__loading";function i(t,e){var i=[],n=e?"src":"href";return t.each(function(){i.push(p(this).attr(n))}),o.uniq(i)}function j(t,e,i){for(var n=0,o=0,r=t.length;o<r;o++){var s=document.createElement("script");s.onload=function(){++n===t.length&&p.isFunction(i)&&i(),e&&e.url&&e.response&&function(t,e){var i,n=p.fn.bhojpurSliderAfterShow;for(i in n)n.hasOwn(i)&&!n[i].isLoaded&&(n[i].isLoaded=!0,n[i].call(this,t,e))}(e.url,e.response)},s.src=t[o],document.body.appendChild(s)}}function _(t){var e=document.createElement("link"),i=t.shift();e.type="text/css",e.rel="stylesheet",e.onload=function(){t.length&&_(t)},e.href=i,document.getElementsByTagName("head")[0].appendChild(e)}function w(t){var e=p("script"),t=i(t,!0),e=i(e,!0);return o.difference(t,e)}function S(t){var e=p("link"),t=i(t),e=i(e);return o.difference(t,e)}function s(t,e){this.$element=p(t),this.options=p.extend({},s.DEFAULTS,p.isPlainObject(e)&&e),this.slided=!1,this.disabled=!1,this.slideoutType=!1,this.init()}return s.prototype={constructor:s,init:function(){this.build(),this.bind()},build:function(){var t;this.$slideout=t=p(s.TEMPLATE).appendTo("body"),this.$slideoutTemplate=t.html()},unbuild:function(){this.$slideout.remove()},bind:function(){this.$slideout.on(a,"form",this.submit.bind(this)).on(t,".bhojpur-slideout__fullscreen",this.toggleSlideoutMode.bind(this)).on(t,'[data-dismiss="slideout"]',this.hide.bind(this)),e.on(n,p.proxy(this.keyup,this))},unbind:function(){this.$slideout.off(a,this.submit).off(t),e.off(n,this.keyup)},keyup:function(t){27===t.which&&(p(".bhojpur-bottomsheets").is(":visible")||p(".bhojpur-modal").is(":visible")||p("#redactor-modal-box").length||p("#dialog").is(":visible")||(this.hide(),this.removeSelectedClass()))},loadExtraResource:function(t){var e=S(t.$links),i=w(t.$scripts);e.length&&_(e),i.length&&j(i,t)},removeSelectedClass:function(){this.$element.find("[data-url]").removeClass("is-selected")},addLoading:function(){p(b).remove(),p(s.TEMPLATE_LOADING).appendTo(p("body")).trigger("enable.bhojpur.material")},toggleSlideoutMode:function(){this.$slideout.toggleClass("bhojpur-slideout__fullscreen").find(".bhojpur-slideout__fullscreen i").toggle()},checkRichedutorHTMLTags:function(u){for(var t=new Array,e=new Array,i=u.value.split("\n"),n=0;n<i.length;n++)if(e=i[n].match(/<(\/{1})?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)>/g))for(var o=0;o<e.length;o++)if(0<=e[o].indexOf("</"))for(var r=(r=e[o].substr(2,e[o].length-3)).replace(/ /g,""),s=t.length-1;0<=s&&(t[s].element!=r||(t.splice(s,1),"html"==r));s--);else{for(var a=new Object,l=(a.full=e[o],a.line=n+1,0<a.full.indexOf(" ")?a.element=a.full.substr(1,a.full.indexOf(" ")-1):a.element=a.full.substr(1,a.full.length-2),new Array("area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr")),h=!1,d=0;d<l.length;d++)0==l[d].localeCompare(a.element)&&(h=!0);0==h&&t.push(a)}return t.length},submit:function(t){var i=this.$slideout,e=t.target,n=p(e),o=this,r=p(l.$formLoading),s=n.find(":submit"),a=!1;if(!n.data("normal-submit")&&(i.trigger("slideoutBeforeSend.bhojpur.slideout"),d)){if(t.preventDefault(),document.querySelectorAll(".bhojpur-redactor-box .redactor-source").forEach(function(t){o.checkRichedutorHTMLTags(t)&&(a=!0)}),a)return l.bhojpurConfirm(f.slideoutCheckHTMLTagsError),!1;this.submitXHR=p.ajax(n.prop("action"),{method:n.prop("method"),data:new d(e),dataType:"html",processData:!1,contentType:!1,beforeSend:function(){p(".bhojpur-submit-loading").remove(),r.appendTo(s.prop("disabled",!0).closest(".bhojpur-form__actions")).trigger("enable.bhojpur.material"),p.fn.bhojpurSlideoutBeforeHide=null},success:function(){var t=n.data("returnUrl"),e=n.data("refreshUrl");i.trigger("slideoutSubmitComplete.bhojpur.slideout"),e?window.location.href=e:"refresh"!=t&&t&&"refresh"!=t?o.load(t):o.refresh()},error:function(t){l.handleAjaxError(t)},complete:function(){s.prop("disabled",!1)}})}},load:function(a,l){var d,t,e,u,h=this.options,c=this.$slideout;a&&(l=p.isPlainObject(l)?l:{},d=l.method||"GET",t=l.datatype||"html",e=p.proxy(function(){p.ajax(a,{method:d,dataType:t,cache:!0,ifModified:!0,success:p.proxy(function(t){var e,i,n;if(p(b).remove(),"GET"===d){if(o=(e=(n=p(t)).find(".mdl-layout__content.bhojpur-page")).find(".bhojpur-form-container"),this.slideoutType=o.length&&o.data().slideoutType,e.length){var o=t.match(/<\s*body.*>[\s\S]*<\s*\/body\s*>/gi),r=(o&&(o=o.join("").replace(/<\s*body/gi,"<div").replace(/<\s*\/body/gi,"</div"),o=p(o).prop("class"),p("body").addClass(o),o={$scripts:n.filter("script"),$links:n.filter("link"),url:a,response:t},this.loadExtraResource(o)),e.find(".bhojpur-button--cancel").attr("data-dismiss","slideout").removeAttr("href"),o=w(e.find("script[src]")),i=S(e.find("link[href]")),o.length&&j(o,{url:a,response:t},function(){}),i.length&&_(i),e.find("script[src],link[href]").remove(),c.html(this.$slideoutTemplate),u=c.find(".bhojpur-slideout__title"),this.$body=c.find(".bhojpur-slideout__body"),u.html(n.find(h.title).html()),o=c.find(".bhojpur-slideout__body")[0],i=e.html(),(n=(o="string"==typeof o?document.getElementById(o):o).cloneNode(!1)).innerHTML=i,o.parentNode.replaceChild(n,o),this.$body.find(".bhojpur-actions__locale").remove(),c.one(y,function(){p(this).trigger("enable")}).one(m,function(){p(this).trigger("disable")}),c.find(".bhojpur-slideout__opennew").attr("href",a),this.show(),p.fn.bhojpurSliderAfterShow);if(r)for(var s in r)r.hasOwn(s)&&p.isFunction(r[s])&&(r[s].isLoaded=!0,r[s].call(this,a,t));c.trigger("slideoutLoaded.bhojpur.slideout",[a,t])}}else l.returnUrl?this.load(l.returnUrl):this.refresh()},this),error:p.proxy(function(){var t;p(b).remove(),t=0<p(".bhojpur-error span").length?p(".bhojpur-error span").map(function(){return p(this).text()}).get().join(", "):f.serverError,window.alert(t)},this)})},this),this.slided?(this.hide(!0),this.$slideout.one(m,e)):e())},open:function(t){this.addLoading(),this.load(t.url,t.data)},reload:function(t){this.hide(),this.load(t)},show:function(){var t,e=this.$slideout;this.slided||(t=p.Event("show.bhojpur.slideout"),e.trigger(t),t.isDefaultPrevented()||(e.removeClass(c),"mini"==this.slideoutType&&e.addClass(c),e.addClass(g).get(0).offsetWidth,e.one(u,p.proxy(this.shown,this)).addClass(v).scrollTop(0)))},shown:function(){this.slided=!0,p("body").addClass(h),this.$slideout.trigger("beforeEnable.bhojpur.slideout").trigger(y).trigger("afterEnable.bhojpur.slideout")},hide:function(){var t={confirm:f.slideoutCloseWarning};p.fn.bhojpurSlideoutBeforeHide?l.bhojpurConfirm(t,function(t){t&&this.hideSlideout()}.bind(this)):this.hideSlideout(),this.removeSelectedClass()},hideSlideout:function(){var t=this.$slideout,e=p(".bhojpur-datepicker").not(".hidden");window.onbeforeunload=null,p.fn.bhojpurSlideoutBeforeHide=null,this.submitXHR&&this.submitXHR.abort(),e.length&&e.addClass("hidden"),this.slided&&(e=p.Event("hide.bhojpur.slideout"),t.trigger(e),e.isDefaultPrevented()||(t.one(u,p.proxy(this.hidden,this)).removeClass("".concat(v," bhojpur-slideout__fullscreen")),t.trigger("slideoutClosed.bhojpur.slideout")))},hidden:function(){this.slided=!1,p("body").removeClass(h),this.$slideout.removeClass(g).trigger(m)},refresh:function(){this.hide(),setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(r)}},s.DEFAULTS={title:".bhojpur-form-title, .mdl-layout-title",content:!1},s.TEMPLATE='<div class="bhojpur-slideout">\n              <div class="bhojpur-slideout__header">\n                  <div class="bhojpur-slideout__header-link">\n                      <a href="#" target="_blank" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect bhojpur-slideout__opennew"><i class="material-icons">open_in_new</i></a>\n                      <a href="#" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect bhojpur-slideout__fullscreen">\n                          <i class="material-icons">fullscreen</i>\n                          <i class="material-icons" style="display: none;">fullscreen_exit</i>\n                      </a>\n                  </div>\n                  <button type="button" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect bhojpur-slideout__close" data-dismiss="slideout">\n                      <span class="material-icons">close</span>\n                  </button>\n                  <h3 class="bhojpur-slideout__title"></h3>\n              </div>\n              <div class="bhojpur-slideout__body"></div>\n          </div>',s.TEMPLATE_LOADING='<div class="bhojpur-body__loading">\n              <div><div class="mdl-spinner mdl-js-spinner is-active bhojpur-layout__bottomsheet-spinner"></div></div>\n          </div>',p.fn.bhojpurSlideout=s.plugin=function(n){return this.each(function(){var t,e=p(this),i=e.data(r);if(!i){if(/destroy/.test(n))return;e.data(r,i=new s(this,n))}"string"==typeof n&&p.isFunction(t=i[n])&&t.apply(i)})},s}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(o){var n=window.location,r="bhojpur.sorter",t="enable."+r,e="click."+r,i="is-sortable";function s(t,e){this.$element=o(t),this.options=o.extend({},s.DEFAULTS,o.isPlainObject(e)&&e),this.init()}return s.prototype={constructor:s,init:function(){this.$element.addClass(i),this.bind()},bind:function(){this.$element.on(e,"> thead > tr > th",o.proxy(this.sort,this))},unbind:function(){this.$element.off(e,this.sort)},sort:function(t){var t=o(t.currentTarget).data("orderBy"),e=n.search,i="order_by="+t;t&&(/order_by/.test(e)?e=e.replace(/order_by(=\w+)?/,function(){return i}):e+=-1<e.indexOf("?")?"&"+i:i,n.search=e)},destroy:function(){this.unbind(),this.$element.removeClass(i).removeData(r)}},s.DEFAULTS={},s.plugin=function(n){return this.each(function(){var t,e=o(this),i=e.data(r);if(!i){if(/destroy/.test(n))return;e.data(r,i=new s(this,n))}"string"==typeof n&&o.isFunction(t=i[n])&&t.apply(i)})},o(function(){var e=".bhojpur-js-table";o(document).on("disable.bhojpur.sorter",function(t){s.plugin.call(o(e,t.target),"destroy")}).on(t,function(t){s.plugin.call(o(e,t.target))}).triggerHandler(t)}),s}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(o){var e=window._,r=o("body"),s="bhojpur.tabbar",i="enable."+s,t="click."+s,a=".bhojpur-layout__tab-button",l=".bhojpur-layout__tab-content",d=".mdl-layout__tab-bar-container",u=".bhojpur-layout__tab-right",h=".bhojpur-layout__tab-left",p="is-active";function c(t,e){this.$element=o(t),this.options=o.extend({},c.DEFAULTS,o.isPlainObject(e)&&e),this.init()}return c.prototype={constructor:c,init:function(){this.initTab(),this.bind()},bind:function(){this.$element.on(t,a,this.switchTab.bind(this)),this.$element.on(t,u,this.scrollTabRight.bind(this)),this.$element.on(t,h,this.scrollTabLeft.bind(this))},unbind:function(){this.$element.off(t,a,this.switchTab),this.$element.off(t,u,this.scrollTabRight),this.$element.off(t,h,this.scrollTabLeft)},initTab:function(){var t=this.$element.data();t.scopeActive?r.data("tabScopeActive",t.scopeActive):(o(a).first().addClass(p),r.data("tabScopeActive",o(a).first().data("name"))),this.tabWidth=0,this.slideoutWidth=o(l).outerWidth(),e.each(o(a),function(t){this.tabWidth=this.tabWidth+o(t).outerWidth()}.bind(this)),this.tabWidth>this.slideoutWidth&&this.$element.find(d).append(c.ARROW_RIGHT)},scrollTabLeft:function(t){t.stopPropagation();var e=o(d),t=e.scrollLeft(),i=t-this.slideoutWidth;0<t&&e.animate({scrollLeft:i},400,function(){o(u).show(),0==e.scrollLeft()&&o(h).hide()})},scrollTabRight:function(t){t.stopPropagation();var e=o(d),t=e.scrollLeft(),i=this.tabWidth,n=this.slideoutWidth,t=t+n;t<i&&(e.animate({scrollLeft:t},400,function(){o(h).show(),e.scrollLeft()+n>=i&&o(u).hide()}),o(h).length||this.$element.find(d).prepend(c.ARROW_LEFT))},switchTab:function(t){var e=o(t.target),t=this.$element,i=e.data(),n=r.data().tabScopeActive;if(o(".bhojpur-slideout").is(":visible"))return e.hasClass(p)||(t.find(a).removeClass(p),e.addClass(p),o.ajax(i.tabUrl,{method:"GET",dataType:"html",processData:!1,contentType:!1,beforeSend:function(){o(".bhojpur-layout__tab-spinner").remove();o(l).hide().before('<div class="mdl-spinner mdl-js-spinner is-active bhojpur-layout__tab-spinner"></div>'),window.componentHandler.upgradeElement(o(".bhojpur-layout__tab-spinner")[0])},success:function(t){o(".bhojpur-layout__tab-spinner").remove(),r.data("tabScopeActive",e.data("name"));t=o(t).find(l).html();o(l).show().html(t).trigger("enable")},error:function(){o(".bhojpur-layout__tab-spinner").remove(),r.data("tabScopeActive",n)}})),!1},destroy:function(){this.unbind(),r.removeData("tabScopeActive")}},c.ARROW_RIGHT='<a href="javascript://" class="bhojpur-layout__tab-right"></a>',c.ARROW_LEFT='<a href="javascript://" class="bhojpur-layout__tab-left"></a>',c.DEFAULTS={},c.plugin=function(n){return this.each(function(){var t,e=o(this),i=e.data(s);if(!i){if(/destroy/.test(n))return;e.data(s,i=new c(this,n))}"string"==typeof n&&o.isFunction(t=i[n])&&t.apply(i)})},o(function(){var e='[data-toggle="bhojpur.tab"]';o(document).on("disable.bhojpur.tabbar",function(t){c.plugin.call(o(e,t.target),"destroy")}).on(i,function(t){c.plugin.call(o(e,t.target))}).triggerHandler(i)}),c}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var s="bhojpur.timepicker",t="enable."+s,e="click."+s,i="focus."+s,n="keydown."+s,o="blur."+s,a="selectTime."+s;function l(t,e){this.$element=r(t),this.options=r.extend(!0,{},l.DEFAULTS,r.isPlainObject(e)&&e),this.formatDate=null,this.pickerData=this.$element.data(),this.parent=this.$element.closest("[data-picker-type]"),this.isDateTimePicker="datetime"==this.parent.data("picker-type"),this.$targetInput=this.parent.find(this.pickerData.targetInput||(this.isDateTimePicker?".bhojpur-datetimepicker__input":".bhojpur-datepicker__input")),this.init()}return l.prototype={init:function(){var t,e,i;this.$targetInput.is(":disabled")?this.$element.remove():(this.bind(),this.oldValue=this.$targetInput.val(),e=(e=(t=new Date).getMonth()+1)<8?"0"+e:e,i=(i=t.getDate())<10?"0"+i:i,this.dateValueNow=t.getFullYear()+"-"+e+"-"+i)},bind:function(){this.isDateTimePicker&&this.$targetInput.bhojpurTimepicker({timeFormat:"H:i",showOn:null,wrapHours:!1,scrollDefault:"now"}).on(a,r.proxy(this.changeTime,this)).on(o,r.proxy(this.blur,this)).on(i,r.proxy(this.focus,this)).on(n,r.proxy(this.keydown,this)),this.$element.on(e,r.proxy(this.show,this))},unbind:function(){this.$element.off(e,this.show),this.isDateTimePicker&&this.$targetInput.off(a,this.changeTime).off(o,this.blur).off(i,this.focus).off(n,this.keydown)},focus:function(){},blur:function(){var t,e,i,n,o,r=this.$targetInput.val(),s=r.split(" "),u=s.length,h=/\d{1,2}:\d{1,2}/,c=/^\d{4}-\d{1,2}-\d{1,2}/;if(r){if(1==u)c.test(s[0])&&(t=s[0],e="00:00"),h.test(s[0])&&(t=this.dateValueNow,e=s[0]);else for(var a=0;a<u;a++){i=c.test(s[a]),n=h.test(s[a]),i&&(t=s[a],o="-"),n&&(e=s[a],o=":");for(var l=s[a].split(o),d=0;d<l.length;d++)l[d].length<2&&(l[d]="0"+l[d]);i&&(t=l.join(o)),n&&(e=l.join(o))}this.checkDate(t)&&this.checkTime(e)?(this.$targetInput.val(t+" "+e),this.oldValue=this.$targetInput.val()):this.$targetInput.val(this.oldValue)}},keydown:function(t){var e=t.keyCode;-1==[48,49,50,51,52,53,54,55,56,57,8,37,38,39,40,27,32,20,189,16,186,96,97,98,99,100,101,102,103,104,105].indexOf(e)&&t.preventDefault()},checkDate:function(t){return/^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{1,2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$/.test(t)},checkTime:function(t){return/^([01]\d|2[0-3]):?([0-5]\d)$/.test(t)},changeTime:function(){var t=this.$targetInput,e=this.oldValue,i=/\d{1,2}:\d{1,2}/,n=i.test(e),o=t.data().timepickerObj.list.find(".ui-timepicker-selected").html(),n=e?n?e.replace(i,o):e+" "+o:this.dateValueNow+" "+o;t.val(n),t.trigger("change")},show:function(){this.isDateTimePicker&&(this.$targetInput.bhojpurTimepicker("show"),this.oldValue=this.$targetInput.val())},destroy:function(){this.unbind(),this.$targetInput.bhojpurTimepicker("remove"),this.$element.removeData(s)}},l.DEFAULTS={},l.plugin=function(o){return this.each(function(){var t,e,i=r(this),n=i.data(s);if(!n){if(!r.fn.bhojpurDatepicker)return;if(/destroy/.test(o))return;t=r.extend(!0,{},i.data(),"object"===_typeof(o)&&o),i.data(s,n=new l(this,t))}"string"==typeof o&&r.isFunction(e=n[o])&&e.apply(n)})},r(function(){var e='[data-toggle="bhojpur.timepicker"]';r(document).on("disable.bhojpur.timepicker",function(t){l.plugin.call(r(e,t.target),"destroy")}).on(t,function(t){l.plugin.call(r(e,t.target))}).triggerHandler(t)}),l}),function(t){"function"==typeof define&&define.amd?define("datepicker",["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(C){var t=C(window),o=window.document,c=C(o),s=window.Number,a="datepicker",i="click."+a,n="keyup."+a,f="focus."+a,e="resize."+a,m="show."+a,b="hide."+a,y="pick."+a,g=/(y|m|d)+/g,v=/\d+/g,j=/^\d{2,4}$/,_=a+"-top-left",w=a+"-bottom-left",S=[_,a+"-top-right",w,a+"-bottom-right"].join(" "),r=a+"-hide",d=Math.min,$=Object.prototype.toString;function u(t){return"string"==typeof t}function k(t){return"number"==typeof t&&!isNaN(t)}function l(t){return void 0===t}function h(t){return"date"===$.call(t).slice(8,-1).toLowerCase()}function x(t,e){var i=[];return Array.from?Array.from(t).slice(e||0):(k(e)&&i.push(e),i.slice.apply(t,i))}function D(t,e){var i=x(arguments,2);return function(){return t.apply(e,i.concat(x(arguments)))}}function T(t,e){return[31,(t=t)%4==0&&t%100!=0||t%400==0?29:28,31,30,31,30,31,31,30,31,30,31][e]}function p(t,e){(e=C.isPlainObject(e)?e:{}).language&&(e=C.extend({},p.LANGUAGES[e.language],e)),this.$element=C(t),this.options=C.extend({},p.DEFAULTS,e),this.isBuilt=!1,this.isShown=!1,this.isInput=!1,this.isInline=!1,this.initialValue="",this.initialDate=null,this.startDate=null,this.endDate=null,this.init()}p.prototype={constructor:p,init:function(){var t=this.options,e=this.$element,i=t.startDate,n=t.endDate,o=t.date;this.$trigger=C(t.trigger||e),this.isInput=e.is("input")||e.is("textarea"),this.isInline=t.inline&&(t.container||!this.isInput),this.format=function(t){var e,i,n=String(t).toLowerCase(),o=n.match(g);if(!o||0===o.length)throw new Error("Invalid date format.");for(t={source:n,parts:o},e=o.length,i=0;i<e;i++)switch(o[i]){case"dd":case"d":t.hasDay=!0;break;case"mm":case"m":t.hasMonth=!0;break;case"yyyy":case"yy":t.hasYear=!0}return t}(t.format),this.initialValue=this.getValue(),o=this.parseDate(o||this.initialValue),i&&(i=this.parseDate(i),o.getTime()<i.getTime()&&(o=new Date(i)),this.startDate=i),n&&(n=this.parseDate(n),i&&n.getTime()<i.getTime()&&(n=new Date(i)),o.getTime()>n.getTime()&&(o=new Date(n)),this.endDate=n),this.date=o,this.viewDate=new Date(o),this.initialDate=new Date(this.date),this.bind(),(t.autoshow||this.isInline)&&this.show(),t.autopick&&this.pick()},build:function(){var t,e=this.options,i=this.$element;this.isBuilt||(this.isBuilt=!0,this.$picker=t=C(e.template),this.$week=t.find('[data-view="week"]'),this.$yearsPicker=t.find('[data-view="years picker"]'),this.$yearsPrev=t.find('[data-view="years prev"]'),this.$yearsNext=t.find('[data-view="years next"]'),this.$yearsCurrent=t.find('[data-view="years current"]'),this.$years=t.find('[data-view="years"]'),this.$monthsPicker=t.find('[data-view="months picker"]'),this.$yearPrev=t.find('[data-view="year prev"]'),this.$yearNext=t.find('[data-view="year next"]'),this.$yearCurrent=t.find('[data-view="year current"]'),this.$months=t.find('[data-view="months"]'),this.$daysPicker=t.find('[data-view="days picker"]'),this.$monthPrev=t.find('[data-view="month prev"]'),this.$monthNext=t.find('[data-view="month next"]'),this.$monthCurrent=t.find('[data-view="month current"]'),this.$days=t.find('[data-view="days"]'),this.isInline?C(e.container||i).append(t.addClass("datepicker-inline")):(C(o.body).append(t.addClass("datepicker-dropdown")),t.addClass(r)),this.fillWeek())},unbuild:function(){this.isBuilt&&(this.isBuilt=!1,this.$picker.remove())},bind:function(){var t=this.options,e=this.$element;C.isFunction(t.show)&&e.on(m,t.show),C.isFunction(t.hide)&&e.on(b,t.hide),C.isFunction(t.pick)&&e.on(y,t.pick),this.isInput&&(e.on(n,C.proxy(this.keyup,this)),t.trigger||e.on(f,C.proxy(this.show,this))),this.$trigger.on(i,C.proxy(this.show,this))},unbind:function(){var t=this.options,e=this.$element;C.isFunction(t.show)&&e.off(m,t.show),C.isFunction(t.hide)&&e.off(b,t.hide),C.isFunction(t.pick)&&e.off(y,t.pick),this.isInput&&(e.off(n,this.keyup),t.trigger||e.off(f,this.show)),this.$trigger.off(i,this.show)},showView:function(t){var e=this.$yearsPicker,i=this.$monthsPicker,n=this.$daysPicker,o=this.format;if(o.hasYear||o.hasMonth||o.hasDay)switch(s(t)){case 2:case"years":i.addClass(r),n.addClass(r),o.hasYear?(this.fillYears(),e.removeClass(r)):this.showView(0);break;case 1:case"months":e.addClass(r),n.addClass(r),o.hasMonth?(this.fillMonths(),i.removeClass(r)):this.showView(2);break;default:e.addClass(r),i.addClass(r),o.hasDay?(this.fillDays(),n.removeClass(r)):this.showView(1)}},hideView:function(){this.options.autohide&&this.hide()},place:function(){var t=this.options,e=this.$element,i=this.$picker,n=c.outerWidth(),u=c.outerHeight(),h=e.outerWidth(),o=e.outerHeight(),r=i.width(),s=i.height(),e=e.offset(),a=e.left,e=e.top,l=parseFloat(t.offset)||10,d=_;s<e&&u<e+o+s?(e-=s+l,d=w):e+=o+l,n<a+r&&(a=a+h-r,d=d.replace("left","right")),i.removeClass(S).addClass(d).css({top:e,left:a,zIndex:parseInt(t.zIndex,10)})},trigger:function(t,e){t=C.Event(t,e);return this.$element.trigger(t),t},createItem:function(t){var e=this.options,i=e.itemTag,n={text:"",view:"",muted:!1,picked:!1,disabled:!1};return C.extend(n,t),"<"+i+" "+(n.disabled?'class="'+e.disabledClass+'"':n.picked?'class="'+e.pickedClass+'"':n.muted?'class="'+e.mutedClass+'"':"")+(n.view?' data-view="'+n.view+'"':"")+">"+n.text+"</"+i+">"},fillAll:function(){this.fillYears(),this.fillMonths(),this.fillDays()},fillWeek:function(){for(var t=this.options,e=parseInt(t.weekStart,10)%7,i=t.daysMin,n="",i=C.merge(i.slice(e),i.slice(0,e)),o=0;o<=6;o++)n+=this.createItem({text:i[o]});this.$week.html(n)},fillYears:function(){for(var t,e,i=this.options,n=i.disabledClass||"",o=i.yearSuffix||"",r=C.isFunction(i.filter)&&i.filter,u=this.startDate,h=this.endDate,i=this.viewDate,s=i.getFullYear(),c=i.getMonth(),p=i.getDate(),a=this.date,f=a.getFullYear(),m=!1,b=!1,l=!1,y="",d=-5;d<=6;d++)a=new Date(s+d,c,p),e=-5===d||6===d,t=s+d===f,l=!1,u&&(l=a.getFullYear()<u.getFullYear(),-5===d&&(m=l)),!l&&h&&(l=a.getFullYear()>h.getFullYear(),6===d&&(b=l)),!l&&r&&(l=!1===r.call(this.$element,a)),y+=this.createItem({text:s+d,view:l?"year disabled":t?"year picked":"year",muted:e,picked:t,disabled:l});this.$yearsPrev.toggleClass(n,m),this.$yearsNext.toggleClass(n,b),this.$yearsCurrent.toggleClass(n,!0).html(s+-5+o+" - "+(s+6)+o),this.$years.html(y)},fillMonths:function(){for(var t,e=this.options,i=e.disabledClass||"",u=e.monthsShort,h=C.isFunction(e.filter)&&e.filter,n=this.startDate,o=this.endDate,c=this.viewDate,r=c.getFullYear(),p=c.getDate(),s=this.date,f=s.getFullYear(),m=s.getMonth(),a=!1,b=!1,l=!1,y="",d=0;d<=11;d++)s=new Date(r,d,p),t=r===f&&d===m,l=!1,!(l=!(l=n?(a=s.getFullYear()===n.getFullYear())&&s.getMonth()<n.getMonth():l)&&o?(b=s.getFullYear()===o.getFullYear())&&s.getMonth()>o.getMonth():l)&&h&&(l=!1===h.call(this.$element,s)),y+=this.createItem({index:d,text:u[d],view:l?"month disabled":t?"month picked":"month",picked:t,disabled:l});this.$yearPrev.toggleClass(i,a),this.$yearNext.toggleClass(i,b),this.$yearCurrent.toggleClass(i,a&&b).html(r+e.yearSuffix||""),this.$months.html(y)},fillDays:function(){var u,t,e,h,i=this.options,c=i.disabledClass||"",p=i.yearSuffix||"",f=i.monthsShort,m=parseInt(i.weekStart,10)%7,n=C.isFunction(i.filter)&&i.filter,o=this.startDate,r=this.endDate,b=this.viewDate,s=b.getFullYear(),a=b.getMonth(),y=s,g=a,v=s,j=a,l=this.date,_=l.getFullYear(),w=l.getMonth(),S=l.getDate(),b=!1,$=!1,d=!1,k=[],x=[],D=[];for(0===a?(--y,g=11):--g,t=T(y,g),(h=(l=new Date(s,a,1)).getDay()-m)<=0&&(h+=7),o&&(b=l.getTime()<=o.getTime()),e=t-(h-1);e<=t;e++)l=new Date(y,g,e),d=!1,!(d=o?l.getTime()<o.getTime():d)&&n&&(d=!1===n.call(this.$element,l)),k.push(this.createItem({text:e,view:"day prev",muted:!0,disabled:d}));for(11===a?(v+=1,j=0):j+=1,t=T(s,a),h=42-(k.length+t),l=new Date(s,a,t),r&&($=l.getTime()>=r.getTime()),e=1;e<=h;e++)l=new Date(v,j,e),d=!1,!(d=r?l.getTime()>r.getTime():d)&&n&&(d=!1===n.call(this.$element,l)),x.push(this.createItem({text:e,view:"day next",muted:!0,disabled:d}));for(e=1;e<=t;e++)l=new Date(s,a,e),u=s===_&&a===w&&e===S,d=!1,!(d=!(d=o?l.getTime()<o.getTime():d)&&r?l.getTime()>r.getTime():d)&&n&&(d=!1===n.call(this.$element,l)),D.push(this.createItem({text:e,view:d?"day disabled":u?"day picked":"day",picked:u,disabled:d}));this.$monthPrev.toggleClass(c,b),this.$monthNext.toggleClass(c,$),this.$monthCurrent.toggleClass(c,b&&$).html(i.yearFirst?s+p+" "+f[a]:f[a]+" "+s+p),this.$days.html(k.join("")+D.join(" ")+x.join(""))},click:function(t){var e,i,n,o,r,s,a=C(t.target),l=this.viewDate;if(t.stopPropagation(),t.preventDefault(),!a.hasClass("disabled"))switch(e=l.getFullYear(),i=l.getMonth(),n=l.getDate(),s=a.data("view")){case"years prev":case"years next":e="years prev"===s?e-10:e+10,r=a.text(),(o=j.test(r))&&(e=parseInt(r,10),this.date=new Date(e,i,d(n,28))),this.viewDate=new Date(e,i,d(n,28)),this.fillYears(),o&&(this.showView(1),this.pick("year"));break;case"year prev":case"year next":e="year prev"===s?e-1:e+1,this.viewDate=new Date(e,i,d(n,28)),this.fillMonths();break;case"year current":this.format.hasYear&&this.showView(2);break;case"year picked":this.format.hasMonth?this.showView(1):this.hideView();break;case"year":e=parseInt(a.text(),10),this.date=new Date(e,i,d(n,28)),this.viewDate=new Date(e,i,d(n,28)),this.format.hasMonth?this.showView(1):this.hideView(),this.pick("year");break;case"month prev":case"month next":i="month prev"===s?i-1:"month next"===s?i+1:i,this.viewDate=new Date(e,i,d(n,28)),this.fillDays();break;case"month current":this.format.hasMonth&&this.showView(1);break;case"month picked":this.format.hasDay?this.showView(0):this.hideView();break;case"month":i=C.inArray(a.text(),this.options.monthsShort),this.date=new Date(e,i,d(n,28)),this.viewDate=new Date(e,i,d(n,28)),this.format.hasDay?this.showView(0):this.hideView(),this.pick("month");break;case"day prev":case"day next":case"day":i="day prev"===s?i-1:"day next"===s?i+1:i,n=parseInt(a.text(),10),this.date=new Date(e,i,n),this.viewDate=new Date(e,i,n),this.fillDays(),"day"===s&&this.hideView(),this.pick("day");break;case"day picked":this.hideView(),this.pick("day")}},clickDoc:function(t){for(var e,i=t.target,n=this.$trigger[0];i!==o;){if(i===n){e=!0;break}i=i.parentNode}e||this.hide()},keyup:function(){this.update()},getValue:function(){var t=this.$element,e="";return this.isInput?e=t.val():this.isInline&&!this.options.container||(e=t.text()),e},setValue:function(t){var e=this.$element;t=u(t)?t:"",this.isInput?e.val(t):this.isInline&&!this.options.container||e.text(t)},show:function(){this.isBuilt||this.build(),this.isShown||this.trigger(m).isDefaultPrevented()||(this.isShown=!0,this.$picker.removeClass(r).on(i,C.proxy(this.click,this)),this.showView(this.options.startView),this.isInline||(t.on(e,this._place=D(this.place,this)),c.on(i,this._clickDoc=D(this.clickDoc,this)),this.place()))},hide:function(){this.isShown&&(this.trigger(b).isDefaultPrevented()||(this.isShown=!1,this.$picker.addClass(r).off(i,this.click),this.isInline||(t.off(e,this._place),c.off(i,this._clickDoc))))},update:function(){this.setDate(this.getValue(),!0)},pick:function(t){var e=this.$element,i=this.date;this.trigger(y,{view:t||"",date:i}).isDefaultPrevented()||(this.setValue(this.formatDate(this.date)),this.isInput&&e.trigger("change"))},reset:function(){this.setDate(this.initialDate,!0),this.setValue(this.initialValue),this.isShown&&this.showView(this.options.startView)},getMonthName:function(t,e){var i=this.options,n=i.months;return C.isNumeric(t)?t=s(t):l(e)&&(e=t),(n=!0===e?i.monthsShort:n)[k(t)?t:this.date.getMonth()]},getDayName:function(t,e,i){var n=this.options,o=n.days;return C.isNumeric(t)?t=s(t):(l(i)&&(i=e),l(e)&&(e=t)),(o=!0===i?n.daysMin:!0===e?n.daysShort:o)[k(t)?t:this.date.getDay()]},getDate:function(t){var e=this.date;return t?this.formatDate(e):new Date(e)},setDate:function(t,e){var i=this.options.filter;(h(t)||u(t))&&(t=this.parseDate(t),C.isFunction(i)&&!1===i.call(this.$element,t)||(this.date=t,this.viewDate=new Date(t),e||this.pick(),this.isBuilt&&this.fillAll()))},setStartDate:function(t){(h(t)||u(t))&&(this.startDate=this.parseDate(t),this.isBuilt&&this.fillAll())},setEndDate:function(t){(h(t)||u(t))&&(this.endDate=this.parseDate(t),this.isBuilt&&this.fillAll())},parseDate:function(t){var e,i,n,o,r,s,a=this.format,l=[];if(h(t))return new Date(t.getFullYear(),t.getMonth(),t.getDate());if(u(t)&&(l=t.match(v)||[]),i=(t=new Date).getFullYear(),n=t.getDate(),o=t.getMonth(),e=a.parts.length,l.length===e)for(s=0;s<e;s++)switch(r=parseInt(l[s],10)||1,a.parts[s]){case"dd":case"d":n=r;break;case"mm":case"m":o=r-1;break;case"yy":i=2e3+r;break;case"yyyy":i=r}return new Date(i,o,n)},formatDate:function(t){var e,i,n,o,r,s=this.format,a="";if(h(t))for(a=s.source,i=t.getFullYear(),(o={d:t.getDate(),m:t.getMonth()+1,yy:i.toString().substring(2),yyyy:i}).dd=(o.d<10?"0":"")+o.d,o.mm=(o.m<10?"0":"")+o.m,e=s.parts.length,r=0;r<e;r++)n=s.parts[r],a=a.replace(n,o[n]);return a},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(a)}},p.LANGUAGES={},p.DEFAULTS={autoshow:!1,autohide:!1,autopick:!1,inline:!1,container:null,trigger:null,language:"",format:"yyyy-mm-dd",date:null,startDate:null,endDate:null,startView:0,weekStart:0,yearFirst:!1,yearSuffix:"",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],itemTag:"li",mutedClass:"muted",pickedClass:"picked",disabledClass:"disabled",template:'<div class="datepicker-container"><div class="datepicker-panel" data-view="years picker"><ul><li data-view="years prev">&lsaquo;</li><li data-view="years current"></li><li data-view="years next">&rsaquo;</li></ul><ul data-view="years"></ul></div><div class="datepicker-panel" data-view="months picker"><ul><li data-view="year prev">&lsaquo;</li><li data-view="year current"></li><li data-view="year next">&rsaquo;</li></ul><ul data-view="months"></ul></div><div class="datepicker-panel" data-view="days picker"><ul><li data-view="month prev">&lsaquo;</li><li data-view="month current"></li><li data-view="month next">&rsaquo;</li></ul><ul data-view="week"></ul><ul data-view="days"></ul></div></div>',offset:10,zIndex:1e3,filter:null,show:null,hide:null,pick:null},p.setDefaults=function(t){C.extend(p.DEFAULTS,C.isPlainObject(t)&&t)},p.other=C.fn.bhojpurDatepicker,C.fn.bhojpurDatepicker=function(o){var r,s=x(arguments,1);return this.each(function(){var t,e,i=C(this),n=i.data(a);if(!n){if(/destroy/.test(o))return;t=C.extend({},i.data(),C.isPlainObject(o)&&o),i.data(a,n=new p(this,t))}u(o)&&C.isFunction(e=n[o])&&(r=e.apply(n,s))}),l(r)?this:r},C.fn.bhojpurDatepicker.Constructor=p,C.fn.bhojpurDatepicker.languages=p.LANGUAGES,C.fn.bhojpurDatepicker.setDefaults=p.setDefaults,C.fn.bhojpurDatepicker.noConflict=function(){return C.fn.bhojpurDatepicker=p.other,this}});