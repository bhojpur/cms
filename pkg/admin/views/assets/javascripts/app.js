"use strict";$(function(){$(document).on("click.bhojpur.alert",'[data-dismiss="alert"]',function(){$(this).closest(".bhojpur-alert").removeClass("bhojpur-alert__active")}),setTimeout(function(){$('.bhojpur-alert[data-dismissible="true"]').removeClass("bhojpur-alert__active")},5e3)}),$(function(){$(document).on("click",".bhojpur-dialog--global-search",function(e){e.stopPropagation(),$(e.target).parents(".bhojpur-dialog-content").length||$(e.target).is(".bhojpur-dialog-content")||$(".bhojpur-dialog--global-search").remove()}),$(document).on("click",".bhojpur-global-search--show",function(e){e.preventDefault();e=$(this).data(),e=window.Mustache.render('<div class="bhojpur-dialog bhojpur-dialog--global-search" tabindex="-1" role="dialog" aria-hidden="true"><div class="bhojpur-dialog-content"><form action=[[actionUrl]]><div class="mdl-textfield mdl-js-textfield" id="global-search-textfield"><input class="mdl-textfield__input ignore-dirtyform" name="keyword" id="globalSearch" value="" type="text" placeholder="" /><label class="mdl-textfield__label" for="globalSearch">[[placeholder]]</label></div></form></div></div>',e);$("body").append(e),window.componentHandler.upgradeElement(document.getElementById("global-search-textfield")),$("#globalSearch").focus()})}),$(function(){var t=[],l="bhojpuradmin_menu_status",e=localStorage.getItem(l),e=(e&&e.length&&(t=e.split(",")),$(".bhojpur-menu-container").on("click","> ul > li > a",function(){var e=$(this),a=e.parent(),o=e.next("ul"),e=a.attr("bhojpur-icon-name");o.length&&(o.hasClass("in")?(t.push(e),a.removeClass("is-expanded"),o.one("transitionend",function(){o.removeClass("collapsing in")}).addClass("collapsing").height(0)):(t=_.without(t,e),a.addClass("is-expanded"),o.one("transitionend",function(){o.removeClass("collapsing")}).addClass("collapsing in").height(o.prop("scrollHeight"))),localStorage.setItem(l,t))}).find("> ul > li > a").each(function(){var e=$(this),a=e.parent(),e=e.next("ul"),o=a.attr("bhojpur-icon-name");e.length&&(e.addClass("collapse"),a.addClass("has-menu"),-1!=t.indexOf(o)?e.height(0):(a.addClass("is-expanded"),e.addClass("in").height(e.prop("scrollHeight"))))}),$(".bhojpur-page > .bhojpur-page__header")),a=$(".bhojpur-page > .bhojpur-page__body"),o=e.find(".bhojpur-page-subnav__header").length?96:48;e.length&&(e.height()>o&&a.css("padding-top",e.height()),$(".bhojpur-page").addClass("has-header"),$("header.mdl-layout__header").addClass("has-action"))}),$(function(){$(".bhojpur-mobile--show-actions").on("click",function(){$(".bhojpur-page__header").toggleClass("actions-show")})}),$(function(){function p(){return j.hasClass("bhojpur-bottomsheets-open")}var b,g,j=$("body"),m="is-selected";function f(e){$("[data-url]").removeClass(m),e&&e.length&&e.addClass(m)}j.bhojpurBottomSheets(),j.bhojpurSlideout(),b=j.data("bhojpur.slideout"),g=j.data("bhojpur.bottomsheets"),$(document).on("click.bhojpur.openUrl","[data-url]",function(e){var a,o,t=$(this),l=$(e.target),s=t.hasClass("bhojpur-button--new"),d=t.hasClass("bhojpur-button--edit"),n=(t.is(".bhojpur-table tr[data-url]")||t.closest(".bhojpur-js-table").length)&&!t.closest(".bhojpur-slideout").length,r=t.data(),i=r.openType,u=t.parents(".bhojpur-theme-slideout").length,c=t.closest(".bhojpur-slideout").length,h=t.hasClass("bhojpur-action-button")||t.hasClass("bhojpur-action--button");if(e.stopPropagation(),!(t.data("ajax-form")||l.closest(".bhojpur-table--bulking").length||l.closest(".bhojpur-button--actions").length||!l.data("url")&&l.is("a")||n&&p()))if("window"!=i){if("new_window"!=i)return h&&(e=$(".bhojpur-js-table tbody").find(".mdl-checkbox__input:checked"),o=[],(a=!!e.length&&(e.each(function(){o.push($(this).closest("tr").data("primary-key"))}),o))&&(r=$.extend({},r,{actionData:a}))),r.$target=l,r.method&&"GET"!=r.method.toUpperCase()?void 0:("bottomsheet"!=i&&!h||"slideout"==i?"slideout"==i||n||s&&!p()||d?"slideout"==i||u?t.hasClass(m)?(b.hide(),f()):(b.open(r),f(t)):window.location.href=r.url:(!(j.hasClass("bhojpur-slideout-open")||s&&p())&&u?b:g).open(r):h&&!a&&t.closest('[data-toggle="bhojpur.action.bulk"]').length&&!c?window.bhojpur.bhojpurConfirm(r.errorNoItem):g.open(r),!1);window.open(r.url,"_blank")}else window.location.href=r.url})}),$(function(){var l=window.location;$(".bhojpur-search").each(function(){var e=$(this),a=e.find(".bhojpur-search__input"),o=e.find(".bhojpur-search__clear"),t=!!a.val();e.closest(".bhojpur-page__header").addClass("has-search"),$("header.mdl-layout__header").addClass("has-search"),o.on("click",function(){a.val()||t?"?"==l.search.replace(new RegExp(a.attr("name")+"\\=?\\w*"),"")?l.href=l.href.split("?")[0]:l.search=l.search.replace(new RegExp(a.attr("name")+"\\=?\\w*"),""):e.removeClass("is-dirty")})})});